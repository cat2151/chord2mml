!function(r,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t=e();for(var n in t)("object"==typeof exports?exports:r)[n]=t[n]}}(self,(()=>(()=>{"use strict";var r={699:r=>{function e(r){switch(r){case"ionian":return[0,2,4,5,7,9,11];case"dorian":return[0,2,3,5,7,9,10];case"phrygian":return[0,1,3,5,7,8,10];case"lydian":return[0,2,4,6,7,9,11];case"mixolydian":return[0,2,4,5,7,9,10];case"aeolian":return[0,2,3,5,7,8,10];case"locrian":return[0,1,3,5,6,8,10];default:throw new Error("ERROR : getOffsetsByScale")}}function t(r,e,t){let n;switch(r){case"C":n=0;break;case"D":n=2;break;case"E":n=4;break;case"F":n=5;break;case"G":n=7;break;case"A":n=9;break;case"B":n=11;break;default:throw new Error("ERROR : getRootCdefgabOffset")}return n+=e.length-t.length,n}function n(r,e,t,o){var s=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=e,s.found=t,s.location=o,s.name="SyntaxError",s}function o(r,e,t){return t=t||" ",r.length>e?r:(e-=r.length,r+(t+=t.repeat(e)).slice(0,e))}!function(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}(n,Error),n.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var t,n=null;for(t=0;t<r.length;t++)if(r[t].source===this.location.source){n=r[t].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,u=this.location.source+":"+a.line+":"+a.column;if(n){var c=this.location.end,i=o("",a.line.toString().length," "),f=n[s.line-1],l=(s.line===c.line?c.column:f.length+1)-s.column||1;e+="\n --\x3e "+u+"\n"+i+" |\n"+a.line+" | "+f+"\n"+i+" | "+o("",s.column-1," ")+o("",l,"^")}else e+="\n at "+u}return e},n.buildMessage=function(r,e){var t={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var e=r.parts.map((function(r){return Array.isArray(r)?s(r[0])+"-"+s(r[1]):s(r)}));return"["+(r.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function s(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return t[r.type](r)}return"Expected "+function(r){var e,t,n=r.map(a);if(n.sort(),n.length>0){for(e=1,t=1;e<n.length;e++)n[e-1]!==n[e]&&(n[t]=n[e],t++);n.length=t}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(e)+" found."},r.exports={SyntaxError:n,parse:function(r,o){var s,a={},u=(o=void 0!==o?o:{}).grammarSource,c={CHORDS:Po},i=Po,f="/",l="on",h="over",b="chord over bass note",v="slash chord inversion",p="upper structure triad",d="upper structure",g="ust",A="us",m="polychord",w="poly",y="/*",C="*/",k="root inv",L="1st inv",O="2nd inv",I="3rd inv",R="close harmony",x="close",E="drop2",S="drop-2",j="open triad",V="drop4",F="drop-4",Q="drop2and4",M="drop-2-and-4",N="no bass",P="bass is root",q="bass plays root",B="bass play root",D="bpm",J="tempo",T="|",G=" / ",U="key",K="ionian",_="dorian",H="phrygian",z="lydian",W="mixolydian",X="aeolian",Y="locrian",Z="octave",$="up",rr="down",er="VII",tr="III",nr="VI",or="IV",sr="II",ar="V",ur="I",cr="maj",ir="M",fr="maj7",lr="M7",hr="△",br="min",vr="m",pr="-",dr="min7",gr="m7",Ar="-7",mr="6",wr="7",yr="9",Cr="11",kr="13",Lr="sus2",Or="sus4",Ir="7sus2",Rr="7sus4",xr="dim",Er="aug",Sr="(b5)",jr="(-5)",Vr="(+5)",Fr="(#5)",Qr="(",Mr="omit",Nr="o",Pr=")",qr="add",Br="^",Dr="'",Jr=",",Tr=" - ",Gr="→",Ur="Strings",Kr="Ensemble",_r="1",Hr="Str.",zr="2",Wr="voice aahs",Xr="choir aahs",Yr="choir",Zr="chor.",$r=/^[,.]/,re=/^[^*\/]/,ee=/^[0-9]/,te=/^[ =]/,ne=/^[A-G]/,oe=/^[ \-]/,se=/^[1-7]/,ae=/^[#\uFF03\u266F]/,ue=/^[b\u266D]/,ce=/^[135]/,ie=/^[0-3]/,fe=/^[ \t\n\r]/,le=jo("/",!1),he=jo("on",!1),be=jo("over",!1),ve=jo("chord over bass note",!0),pe=Vo([",","."],!1,!1),de=jo("slash chord inversion",!0),ge=jo("upper structure triad",!0),Ae=jo("upper structure",!0),me=jo("UST",!0),we=jo("US",!0),ye=jo("polychord",!0),Ce=jo("poly",!0),ke=jo("/*",!1),Le=Vo(["*","/"],!0,!1),Oe=jo("*/",!1),Ie=jo("root inv",!0),Re=jo("1st inv",!0),xe=jo("2nd inv",!0),Ee=jo("3rd inv",!0),Se=jo("close harmony",!0),je=jo("close",!0),Ve=jo("drop2",!0),Fe=jo("drop-2",!0),Qe=jo("open triad",!0),Me=jo("drop4",!0),Ne=jo("drop-4",!0),Pe=jo("drop2and4",!0),qe=jo("drop-2-and-4",!0),Be=jo("no bass",!0),De=jo("bass is root",!0),Je=jo("bass plays root",!0),Te=jo("bass play root",!0),Ge=jo("BPM",!0),Ue=jo("TEMPO",!0),Ke=Vo([["0","9"]],!1,!1),_e=jo("|",!1),He=jo(" / ",!1),ze=jo("key",!0),We=Vo([" ","="],!1,!1),Xe=Vo([["A","G"]],!1,!1),Ye=jo("ionian",!0),Ze=jo("dorian",!0),$e=jo("phrygian",!0),rt=jo("lydian",!0),et=jo("mixolydian",!0),tt=jo("aeolian",!0),nt=jo("locrian",!0),ot=jo("octave",!0),st=Vo([" ","-"],!1,!1),at=jo("up",!0),ut=jo("down",!0),ct=jo("VII",!1),it=jo("III",!1),ft=jo("VI",!1),lt=jo("IV",!1),ht=jo("II",!1),bt=jo("V",!1),vt=jo("I",!1),pt=Vo([["1","7"]],!1,!1),dt=Vo(["#","＃","♯"],!1,!1),gt=Vo(["b","♭"],!1,!1),At=jo("maj",!0),mt=jo("M",!1),wt=jo("maj7",!0),yt=jo("M7",!1),Ct=jo("△",!1),kt=jo("min",!0),Lt=jo("m",!1),Ot=jo("-",!1),It=jo("min7",!0),Rt=jo("m7",!1),xt=jo("-7",!1),Et=jo("6",!1),St=jo("7",!1),jt=jo("9",!1),Vt=jo("11",!1),Ft=jo("13",!1),Qt=jo("sus2",!1),Mt=jo("sus4",!1),Nt=jo("7sus2",!1),Pt=jo("7sus4",!1),qt=jo("dim",!1),Bt=jo("aug",!1),Dt=jo("(b5)",!1),Jt=jo("(-5)",!1),Tt=jo("(+5)",!1),Gt=jo("(#5)",!1),Ut=jo("(",!1),Kt=jo("omit",!1),_t=jo("o",!1),Ht=Vo(["1","3","5"],!1,!1),zt=jo(")",!1),Wt=jo("add",!1),Xt=jo("^",!1),Yt=Vo([["0","3"]],!1,!1),Zt=jo("'",!1),$t=jo(",",!1),rn=Fo("whitespace"),en=Vo([" ","\t","\n","\r"],!1,!1),tn=Fo("hyphen"),nn=jo(" - ",!1),on=jo("→",!1),sn=jo("Strings",!1),an=jo("Ensemble",!1),un=jo("1",!0),cn=jo("1",!1),fn=jo("Str.",!1),ln=jo("2",!0),hn=jo("2",!1),bn=jo("Voice Aahs",!0),vn=jo("Choir Aahs",!0),pn=jo("Choir",!0),dn=jo("Chor.",!0),gn=function(r){return r},An=function(r,e,t,n){return{event:"chord",root:r,quality:e,inversion:t,octaveOffset:n}},mn=function(r,e,t,n,o,s,a,u){return o??=r,s??=e,{event:"slash chord",upperRoot:r,upperQuality:e,upperInversion:t,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},wn=function(r,e,t,n,o,s,a,u){return o??=r,s??=e,{event:"chord over bass note",upperRoot:r,upperQuality:e,upperInversion:t,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},yn=function(){return{event:"change slash chord mode to chord over bass note"}},Cn=function(){return{event:"change slash chord mode to inversion"}},kn=function(){return{event:"change slash chord mode to polychord"}},Ln=function(r){return{event:"inline mml",mml:r.join("")}},On=function(){return{event:"change inversion mode to root inv"}},In=function(){return{event:"change inversion mode to 1st inv"}},Rn=function(){return{event:"change inversion mode to 2nd inv"}},xn=function(){return{event:"change inversion mode to 3rd inv"}},En=function(){return{event:"change open harmony mode to close"}},Sn=function(){return{event:"change open harmony mode to drop2"}},jn=function(){return{event:"change open harmony mode to drop4"}},Vn=function(){return{event:"change open harmony mode to drop2and4"}},Fn=function(){return{event:"change bass play mode to no bass"}},Qn=function(){return{event:"change bass play mode to root"}},Mn=function(r){return{event:"inline mml",mml:"t"+r.join("")}},Nn=function(){return{event:"bar"}},Pn=function(){return{event:"bar slash"}},qn=function(r){return r},Bn=function(r,e,n){return Yo=t(r,e,n),{event:"key",root:r,sharpLength:e.length,flatLength:n.length,offset:Yo}},Dn=function(r){return Zo=r.toLowerCase(),{event:"scale",offsets:e(Zo)}},Jn=function(){return{event:"octave up"}},Tn=function(){return{event:"octave up upper"}},Gn=function(){return{event:"octave up lower"}},Un=function(){return{event:"octave down"}},Kn=function(){return{event:"octave down upper"}},_n=function(){return{event:"octave down lower"}},Hn=function(r,e,n){return t(r,e,n)},zn=function(r,t,n){let o=function(r,t){return e(r)[function(r){switch(r){case"I":case"1":return 0;case"II":case"2":return 1;case"III":case"3":return 2;case"IV":case"4":return 3;case"V":case"5":return 4;case"VI":case"6":return 5;case"VII":case"7":return 6;default:throw new Error("ERROR : getDegreeIndex")}}(t)]}(Zo,n);return o+=r.length-t.length+Yo,o},Wn=function(){return"#"},Xn=function(){return"b"},Yn=function(r){return r.join("")},Zn=function(){return"maj"},$n=function(){return"maj"},ro=function(){return"maj7"},eo=function(){return"min"},to=function(){return"min"},no=function(){return"min7"},oo=function(){return"6"},so=function(){return"7"},ao=function(){return"9"},uo=function(){return"11"},co=function(){return"13"},io=function(){return"sus2"},fo=function(){return"sus4"},lo=function(){return"7sus2"},ho=function(){return"7sus4"},bo=function(){return"dim triad"},vo=function(){return"aug"},po=function(){return",flatted fifth"},go=function(){return",augmented fifth"},Ao=function(r){return",omit"+r},mo=function(r){return",add"+r.join("")},wo=function(){switch(r.substring(Io,Oo)){case"":return null;case"^0":return"root inv";case"^1":return"1st inv";case"^2":return"2nd inv";case"^3":return"3rd inv";default:throw new Error("ERROR : INVERSION")}},yo=function(r,e){return r.length-e.length},Co=function(){return{event:"inline mml",mml:"@48"}},ko=function(){return{event:"inline mml",mml:"@49"}},Lo=function(){return{event:"inline mml",mml:"@52"}},Oo=0,Io=0,Ro=[{line:1,column:1}],xo=0,Eo=[],So=0;if("startRule"in o){if(!(o.startRule in c))throw new Error("Can't start parsing from rule \""+o.startRule+'".');i=c[o.startRule]}function jo(r,e){return{type:"literal",text:r,ignoreCase:e}}function Vo(r,e,t){return{type:"class",parts:r,inverted:e,ignoreCase:t}}function Fo(r){return{type:"other",description:r}}function Qo(e){var t,n=Ro[e];if(n)return n;for(t=e-1;!Ro[t];)t--;for(n={line:(n=Ro[t]).line,column:n.column};t<e;)10===r.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return Ro[e]=n,n}function Mo(r,e,t){var n=Qo(r),o=Qo(e),s={source:u,start:{offset:r,line:n.line,column:n.column},end:{offset:e,line:o.line,column:o.column}};return t&&u&&"function"==typeof u.offset&&(s.start=u.offset(s.start),s.end=u.offset(s.end)),s}function No(r){Oo<xo||(Oo>xo&&(xo=Oo,Eo=[]),Eo.push(r))}function Po(){var r,e,t;for(r=Oo,e=[],t=qo();t!==a;)e.push(t),t=qo();return t=Wo(),Io=r,gn(e)}function qo(){var e;return(e=function(){var e,t,n,o;if(e=Oo,r.substr(Oo,2)===y?(t=y,Oo+=2):(t=a,0===So&&No(ke)),t!==a){if(n=[],re.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Le)),o!==a)for(;o!==a;)n.push(o),re.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Le));else n=a;n!==a?(r.substr(Oo,2)===C?(o=C,Oo+=2):(o=a,0===So&&No(Oe)),o!==a?(Io=e,e=Ln(n)):(Oo=e,e=a)):(Oo=e,e=a)}else Oo=e,e=a;return e}())===a&&(e=function(){var e,t;return e=Oo,r.substr(Oo,3)===G?(t=G,Oo+=3):(t=a,0===So&&No(He)),t!==a?(Wo(),Io=e,e=Pn()):(Oo=e,e=a),e}())===a&&(e=function(){var e;return(e=function(){var e,t,n,o,s,u,c;return e=Oo,Wo(),t=Oo,r.substr(Oo,7)===Ur?(n=Ur,Oo+=7):(n=a,0===So&&No(sn)),n!==a?(o=Wo(),r.substr(Oo,8)===Kr?(s=Kr,Oo+=8):(s=a,0===So&&No(an)),s!==a?(u=Wo(),r.substr(Oo,1).toLowerCase()===_r?(c=r.charAt(Oo),Oo++):(c=a,0===So&&No(un)),c!==a?t=n=[n,o,s,u,c]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t===a&&(t=Oo,r.substr(Oo,7)===Ur?(n=Ur,Oo+=7):(n=a,0===So&&No(sn)),n!==a?(o=Wo(),49===r.charCodeAt(Oo)?(s=_r,Oo++):(s=a,0===So&&No(cn)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a),t===a&&(t=Oo,r.substr(Oo,4)===Hr?(n=Hr,Oo+=4):(n=a,0===So&&No(fn)),n!==a?(o=Wo(),49===r.charCodeAt(Oo)?(s=_r,Oo++):(s=a,0===So&&No(cn)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),o=Wo(),Io=e,e=Co()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s,u,c;return e=Oo,Wo(),t=Oo,r.substr(Oo,7)===Ur?(n=Ur,Oo+=7):(n=a,0===So&&No(sn)),n!==a?(o=Wo(),r.substr(Oo,8)===Kr?(s=Kr,Oo+=8):(s=a,0===So&&No(an)),s!==a?(u=Wo(),r.substr(Oo,1).toLowerCase()===zr?(c=r.charAt(Oo),Oo++):(c=a,0===So&&No(ln)),c!==a?t=n=[n,o,s,u,c]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t===a&&(t=Oo,r.substr(Oo,7)===Ur?(n=Ur,Oo+=7):(n=a,0===So&&No(sn)),n!==a?(o=Wo(),50===r.charCodeAt(Oo)?(s=zr,Oo++):(s=a,0===So&&No(hn)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a),t===a&&(t=Oo,r.substr(Oo,4)===Hr?(n=Hr,Oo+=4):(n=a,0===So&&No(fn)),n!==a?(o=Wo(),50===r.charCodeAt(Oo)?(s=zr,Oo++):(s=a,0===So&&No(hn)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),o=Wo(),Io=e,e=ko()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,10).toLowerCase()===Wr?(t=r.substr(Oo,10),Oo+=10):(t=a,0===So&&No(bn)),t===a&&(r.substr(Oo,10).toLowerCase()===Xr?(t=r.substr(Oo,10),Oo+=10):(t=a,0===So&&No(vn)),t===a&&(r.substr(Oo,5).toLowerCase()===Yr?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(pn)),t===a&&(r.substr(Oo,5).toLowerCase()===Zr?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(dn))))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Lo()):(Oo=e,e=a),e}()),e}())===a&&(e=function(){var e,t,n,o;if(e=Oo,Wo(),r.substr(Oo,3).toLowerCase()===D?(t=r.substr(Oo,3),Oo+=3):(t=a,0===So&&No(Ge)),t===a&&(r.substr(Oo,5).toLowerCase()===J?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(Ue))),t!==a){if(Wo(),n=[],ee.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Ke)),o!==a)for(;o!==a;)n.push(o),ee.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Ke));else n=a;n!==a?($r.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pe)),o===a&&(o=null),Wo(),Io=e,e=Mn(n)):(Oo=e,e=a)}else Oo=e,e=a;return e}())===a&&(e=function(){var e,t,n,o,s;return e=Oo,Wo(),t=Oo,r.substr(Oo,6).toLowerCase()===Z?(n=r.substr(Oo,6),Oo+=6):(n=a,0===So&&No(ot)),n!==a?(oe.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(st)),o!==a?(r.substr(Oo,2).toLowerCase()===$?(s=r.substr(Oo,2),Oo+=2):(s=a,0===So&&No(at)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t!==a?(47===r.charCodeAt(Oo)?(n=f,Oo++):(n=a,0===So&&No(le)),n!==a?($r.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pe)),o===a&&(o=null),s=Wo(),Io=e,e=Tn()):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s;return e=Oo,Wo(),t=Oo,r.substr(Oo,6).toLowerCase()===Z?(n=r.substr(Oo,6),Oo+=6):(n=a,0===So&&No(ot)),n!==a?(oe.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(st)),o!==a?(r.substr(Oo,4).toLowerCase()===rr?(s=r.substr(Oo,4),Oo+=4):(s=a,0===So&&No(ut)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t!==a?(47===r.charCodeAt(Oo)?(n=f,Oo++):(n=a,0===So&&No(le)),n!==a?($r.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pe)),o===a&&(o=null),s=Wo(),Io=e,e=Kn()):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s,u;return e=Oo,Wo(),47===r.charCodeAt(Oo)?(t=f,Oo++):(t=a,0===So&&No(le)),t!==a?(n=Oo,r.substr(Oo,6).toLowerCase()===Z?(o=r.substr(Oo,6),Oo+=6):(o=a,0===So&&No(ot)),o!==a?(oe.test(r.charAt(Oo))?(s=r.charAt(Oo),Oo++):(s=a,0===So&&No(st)),s!==a?(r.substr(Oo,2).toLowerCase()===$?(u=r.substr(Oo,2),Oo+=2):(u=a,0===So&&No(at)),u!==a?n=o=[o,s,u]:(Oo=n,n=a)):(Oo=n,n=a)):(Oo=n,n=a),n!==a?($r.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pe)),o===a&&(o=null),s=Wo(),Io=e,e=Gn()):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s,u;return e=Oo,Wo(),47===r.charCodeAt(Oo)?(t=f,Oo++):(t=a,0===So&&No(le)),t!==a?(n=Oo,r.substr(Oo,6).toLowerCase()===Z?(o=r.substr(Oo,6),Oo+=6):(o=a,0===So&&No(ot)),o!==a?(oe.test(r.charAt(Oo))?(s=r.charAt(Oo),Oo++):(s=a,0===So&&No(st)),s!==a?(r.substr(Oo,4).toLowerCase()===rr?(u=r.substr(Oo,4),Oo+=4):(u=a,0===So&&No(ut)),u!==a?n=o=[o,s,u]:(Oo=n,n=a)):(Oo=n,n=a)):(Oo=n,n=a),n!==a?($r.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pe)),o===a&&(o=null),s=Wo(),Io=e,e=_n()):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s;return e=Oo,Wo(),t=Oo,r.substr(Oo,6).toLowerCase()===Z?(n=r.substr(Oo,6),Oo+=6):(n=a,0===So&&No(ot)),n!==a?(oe.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(st)),o!==a?(r.substr(Oo,2).toLowerCase()===$?(s=r.substr(Oo,2),Oo+=2):(s=a,0===So&&No(at)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),o=Wo(),Io=e,e=Jn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s;return e=Oo,Wo(),t=Oo,r.substr(Oo,6).toLowerCase()===Z?(n=r.substr(Oo,6),Oo+=6):(n=a,0===So&&No(ot)),n!==a?(oe.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(st)),o!==a?(r.substr(Oo,4).toLowerCase()===rr?(s=r.substr(Oo,4),Oo+=4):(s=a,0===So&&No(ut)),s!==a?t=n=[n,o,s]:(Oo=t,t=a)):(Oo=t,t=a)):(Oo=t,t=a),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),o=Wo(),Io=e,e=Un()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,20).toLowerCase()===b?(t=r.substr(Oo,20),Oo+=20):(t=a,0===So&&No(ve)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Io=e,e=yn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,21).toLowerCase()===p?(t=r.substr(Oo,21),Oo+=21):(t=a,0===So&&No(ge)),t===a&&(r.substr(Oo,15).toLowerCase()===d?(t=r.substr(Oo,15),Oo+=15):(t=a,0===So&&No(Ae)),t===a&&(r.substr(Oo,3).toLowerCase()===g?(t=r.substr(Oo,3),Oo+=3):(t=a,0===So&&No(me)),t===a&&(r.substr(Oo,2).toLowerCase()===A?(t=r.substr(Oo,2),Oo+=2):(t=a,0===So&&No(we)),t===a&&(r.substr(Oo,9).toLowerCase()===m?(t=r.substr(Oo,9),Oo+=9):(t=a,0===So&&No(ye)),t===a&&(r.substr(Oo,4).toLowerCase()===w?(t=r.substr(Oo,4),Oo+=4):(t=a,0===So&&No(Ce))))))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Io=e,e=kn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,21).toLowerCase()===v?(t=r.substr(Oo,21),Oo+=21):(t=a,0===So&&No(de)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Io=e,e=Cn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s,u,c,i,l,h;return e=Oo,Wo(),(t=Bo())!==a&&(n=To())!==a?(o=Ho(),s=zo(),47===r.charCodeAt(Oo)?(u=f,Oo++):(u=a,0===So&&No(le)),u!==a?((c=Bo())===a&&(c=null),(i=To())===a&&(i=null),l=Ho(),h=zo(),Xo(),Io=e,e=mn(t,n,o,s,c,i,l,h)):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s,u,c,i,f,b;return e=Oo,Wo(),(t=Bo())!==a&&(n=To())!==a?(o=Ho(),s=zo(),r.substr(Oo,2)===l?(u=l,Oo+=2):(u=a,0===So&&No(he)),u===a&&(r.substr(Oo,4)===h?(u=h,Oo+=4):(u=a,0===So&&No(be))),u!==a?((c=Bo())===a&&(c=null),(i=To())===a&&(i=null),f=Ho(),b=zo(),Xo(),Io=e,e=wn(t,n,o,s,c,i,f,b)):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,8).toLowerCase()===k?(t=r.substr(Oo,8),Oo+=8):(t=a,0===So&&No(Ie)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=On()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,7).toLowerCase()===L?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(Re)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=In()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,7).toLowerCase()===O?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(xe)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Rn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,7).toLowerCase()===I?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(Ee)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=xn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,9).toLowerCase()===Q?(t=r.substr(Oo,9),Oo+=9):(t=a,0===So&&No(Pe)),t===a&&(r.substr(Oo,12).toLowerCase()===M?(t=r.substr(Oo,12),Oo+=12):(t=a,0===So&&No(qe))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Vn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,5).toLowerCase()===V?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(Me)),t===a&&(r.substr(Oo,6).toLowerCase()===F?(t=r.substr(Oo,6),Oo+=6):(t=a,0===So&&No(Ne))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=jn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,5).toLowerCase()===E?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(Ve)),t===a&&(r.substr(Oo,6).toLowerCase()===S?(t=r.substr(Oo,6),Oo+=6):(t=a,0===So&&No(Fe)),t===a&&(r.substr(Oo,10).toLowerCase()===j?(t=r.substr(Oo,10),Oo+=10):(t=a,0===So&&No(Qe)))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Sn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,13).toLowerCase()===R?(t=r.substr(Oo,13),Oo+=13):(t=a,0===So&&No(Se)),t===a&&(r.substr(Oo,5).toLowerCase()===x?(t=r.substr(Oo,5),Oo+=5):(t=a,0===So&&No(je))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=En()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,7).toLowerCase()===N?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(Be)),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Fn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,12).toLowerCase()===P?(t=r.substr(Oo,12),Oo+=12):(t=a,0===So&&No(De)),t===a&&(r.substr(Oo,15).toLowerCase()===q?(t=r.substr(Oo,15),Oo+=15):(t=a,0===So&&No(Je)),t===a&&(r.substr(Oo,14).toLowerCase()===B?(t=r.substr(Oo,14),Oo+=14):(t=a,0===So&&No(Te)))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Qn()):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n;return e=Oo,Wo(),r.substr(Oo,6).toLowerCase()===K?(t=r.substr(Oo,6),Oo+=6):(t=a,0===So&&No(Ye)),t===a&&(r.substr(Oo,6).toLowerCase()===_?(t=r.substr(Oo,6),Oo+=6):(t=a,0===So&&No(Ze)),t===a&&(r.substr(Oo,8).toLowerCase()===H?(t=r.substr(Oo,8),Oo+=8):(t=a,0===So&&No($e)),t===a&&(r.substr(Oo,6).toLowerCase()===z?(t=r.substr(Oo,6),Oo+=6):(t=a,0===So&&No(rt)),t===a&&(r.substr(Oo,10).toLowerCase()===W?(t=r.substr(Oo,10),Oo+=10):(t=a,0===So&&No(et)),t===a&&(r.substr(Oo,7).toLowerCase()===X?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(tt)),t===a&&(r.substr(Oo,7).toLowerCase()===Y?(t=r.substr(Oo,7),Oo+=7):(t=a,0===So&&No(nt)))))))),t!==a?($r.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(pe)),n===a&&(n=null),Wo(),Io=e,e=Dn(t)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t,n,o,s;return e=Oo,Wo(),r.substr(Oo,3).toLowerCase()===U?(t=r.substr(Oo,3),Oo+=3):(t=a,0===So&&No(ze)),t!==a?(te.test(r.charAt(Oo))?(n=r.charAt(Oo),Oo++):(n=a,0===So&&No(We)),n===a&&(n=null),o=function(){var e,t,n,o,s;if(e=Oo,ne.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(Xe)),t!==a){for(n=[],o=Do();o!==a;)n.push(o),o=Do();for(o=[],s=Jo();s!==a;)o.push(s),s=Jo();Io=e,e=Bn(t,n,o)}else Oo=e,e=a;return e}(),o!==a?($r.test(r.charAt(Oo))?(s=r.charAt(Oo),Oo++):(s=a,0===So&&No(pe)),s===a&&(s=null),Wo(),Io=e,e=qn(o)):(Oo=e,e=a)):(Oo=e,e=a),e}())===a&&(e=function(){var e,t;return e=Oo,Wo(),124===r.charCodeAt(Oo)?(t=T,Oo++):(t=a,0===So&&No(_e)),t!==a?(Wo(),Io=e,e=Nn()):(Oo=e,e=a),e}())===a&&(e=function(){var r,e,t,n,o;return r=Oo,Wo(),(e=Bo())!==a&&(t=To())!==a?(n=Ho(),o=zo(),Xo(),Io=r,r=An(e,t,n,o)):(Oo=r,r=a),r}()),e}function Bo(){var e;return(e=function(){var e,t,n,o,s;if(e=Oo,ne.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(Xe)),t!==a){for(n=[],o=Do();o!==a;)n.push(o),o=Do();for(o=[],s=Jo();s!==a;)o.push(s),s=Jo();Io=e,e=Hn(t,n,o)}else Oo=e,e=a;return e}())===a&&(e=function(){var e,t,n,o;for(e=Oo,t=[],n=Do();n!==a;)t.push(n),n=Do();for(n=[],o=Jo();o!==a;)n.push(o),o=Jo();return r.substr(Oo,3)===er?(o=er,Oo+=3):(o=a,0===So&&No(ct)),o===a&&(r.substr(Oo,3)===tr?(o=tr,Oo+=3):(o=a,0===So&&No(it)),o===a&&(r.substr(Oo,2)===nr?(o=nr,Oo+=2):(o=a,0===So&&No(ft)),o===a&&(r.substr(Oo,2)===or?(o=or,Oo+=2):(o=a,0===So&&No(lt)),o===a&&(r.substr(Oo,2)===sr?(o=sr,Oo+=2):(o=a,0===So&&No(ht)),o===a&&(86===r.charCodeAt(Oo)?(o=ar,Oo++):(o=a,0===So&&No(bt)),o===a&&(73===r.charCodeAt(Oo)?(o=ur,Oo++):(o=a,0===So&&No(vt)),o===a&&(se.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(pt))))))))),o!==a?(Io=e,e=zn(t,n,o)):(Oo=e,e=a),e}()),e}function Do(){var e,t;return e=Oo,ae.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(dt)),t!==a&&(Io=e,t=Wn()),t}function Jo(){var e,t;return e=Oo,ue.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(gt)),t!==a&&(Io=e,t=Xn()),t}function To(){var e,t,n,o,s;if(e=Oo,t=Oo,n=function(){var e,t;return e=Oo,r.substr(Oo,4).toLowerCase()===dr?(t=r.substr(Oo,4),Oo+=4):(t=a,0===So&&No(It)),t===a&&(r.substr(Oo,2)===gr?(t=gr,Oo+=2):(t=a,0===So&&No(Rt)),t===a&&(r.substr(Oo,2)===Ar?(t=Ar,Oo+=2):(t=a,0===So&&No(xt)))),t!==a&&(Io=e,t=no()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,4).toLowerCase()===fr?(t=r.substr(Oo,4),Oo+=4):(t=a,0===So&&No(wt)),t===a&&(r.substr(Oo,2)===lr?(t=lr,Oo+=2):(t=a,0===So&&No(yt)),t===a&&(9651===r.charCodeAt(Oo)?(t=hr,Oo++):(t=a,0===So&&No(Ct)))),t!==a&&(Io=e,t=ro()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,3).toLowerCase()===cr?(t=r.substr(Oo,3),Oo+=3):(t=a,0===So&&No(At)),t!==a&&(Io=e,t=Zn()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,3).toLowerCase()===br?(t=r.substr(Oo,3),Oo+=3):(t=a,0===So&&No(kt)),t!==a&&(Io=e,t=eo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,5)===Rr?(t=Rr,Oo+=5):(t=a,0===So&&No(Pt)),t!==a&&(Io=e,t=ho()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,5)===Ir?(t=Ir,Oo+=5):(t=a,0===So&&No(Nt)),t!==a&&(Io=e,t=lo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,4)===Or?(t=Or,Oo+=4):(t=a,0===So&&No(Mt)),t!==a&&(Io=e,t=fo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,4)===Lr?(t=Lr,Oo+=4):(t=a,0===So&&No(Qt)),t!==a&&(Io=e,t=io()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,3)===xr?(t=xr,Oo+=3):(t=a,0===So&&No(qt)),t!==a&&(Io=e,t=bo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,3)===Er?(t=Er,Oo+=3):(t=a,0===So&&No(Bt)),t!==a&&(Io=e,t=vo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,2)===kr?(t=kr,Oo+=2):(t=a,0===So&&No(Ft)),t!==a&&(Io=e,t=co()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,r.substr(Oo,2)===Cr?(t=Cr,Oo+=2):(t=a,0===So&&No(Vt)),t!==a&&(Io=e,t=uo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,57===r.charCodeAt(Oo)?(t=yr,Oo++):(t=a,0===So&&No(jt)),t!==a&&(Io=e,t=ao()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,55===r.charCodeAt(Oo)?(t=wr,Oo++):(t=a,0===So&&No(St)),t!==a&&(Io=e,t=so()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,54===r.charCodeAt(Oo)?(t=mr,Oo++):(t=a,0===So&&No(Et)),t!==a&&(Io=e,t=oo()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,109===r.charCodeAt(Oo)?(t=vr,Oo++):(t=a,0===So&&No(Lt)),t===a&&(45===r.charCodeAt(Oo)?(t=pr,Oo++):(t=a,0===So&&No(Ot))),t!==a&&(Io=e,t=to()),e=t}(),n===a&&(n=function(){var e,t;return e=Oo,77===r.charCodeAt(Oo)?(t=ir,Oo++):(t=a,0===So&&No(mt)),t===a&&(t=""),t!==a&&(Io=e,t=$n()),e=t}())))))))))))))))),n!==a){for(o=[],(s=Ko())===a&&(s=_o())===a&&(s=Go())===a&&(s=Uo());s!==a;)o.push(s),(s=Ko())===a&&(s=_o())===a&&(s=Go())===a&&(s=Uo());t=n=[n,o]}else Oo=t,t=a;return t!==a&&(Io=e,t=Yn(t)),t}function Go(){var e,t;return e=Oo,r.substr(Oo,4)===Sr?(t=Sr,Oo+=4):(t=a,0===So&&No(Dt)),t===a&&(r.substr(Oo,4)===jr?(t=jr,Oo+=4):(t=a,0===So&&No(Jt))),t!==a&&(Io=e,t=po()),t}function Uo(){var e,t;return e=Oo,r.substr(Oo,4)===Vr?(t=Vr,Oo+=4):(t=a,0===So&&No(Tt)),t===a&&(r.substr(Oo,4)===Fr?(t=Fr,Oo+=4):(t=a,0===So&&No(Gt))),t!==a&&(Io=e,t=go()),t}function Ko(){var e,t,n,o,s;return e=Oo,40===r.charCodeAt(Oo)?(t=Qr,Oo++):(t=a,0===So&&No(Ut)),t===a&&(t=null),r.substr(Oo,4)===Mr?(n=Mr,Oo+=4):(n=a,0===So&&No(Kt)),n===a&&(111===r.charCodeAt(Oo)?(n=Nr,Oo++):(n=a,0===So&&No(_t))),n!==a?(ce.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Ht)),o!==a?(41===r.charCodeAt(Oo)?(s=Pr,Oo++):(s=a,0===So&&No(zt)),s===a&&(s=null),Io=e,e=Ao(o)):(Oo=e,e=a)):(Oo=e,e=a),e}function _o(){var e,t,n,o,s;if(e=Oo,40===r.charCodeAt(Oo)?(t=Qr,Oo++):(t=a,0===So&&No(Ut)),t===a&&(t=null),r.substr(Oo,3)===qr?(n=qr,Oo+=3):(n=a,0===So&&No(Wt)),n!==a){if(o=[],ee.test(r.charAt(Oo))?(s=r.charAt(Oo),Oo++):(s=a,0===So&&No(Ke)),s!==a)for(;s!==a;)o.push(s),ee.test(r.charAt(Oo))?(s=r.charAt(Oo),Oo++):(s=a,0===So&&No(Ke));else o=a;o!==a?(41===r.charCodeAt(Oo)?(s=Pr,Oo++):(s=a,0===So&&No(zt)),s===a&&(s=null),Io=e,e=mo(o)):(Oo=e,e=a)}else Oo=e,e=a;return e}function Ho(){var e,t,n,o;return e=Oo,t=Oo,94===r.charCodeAt(Oo)?(n=Br,Oo++):(n=a,0===So&&No(Xt)),n!==a?(ie.test(r.charAt(Oo))?(o=r.charAt(Oo),Oo++):(o=a,0===So&&No(Yt)),o!==a?t=n=[n,o]:(Oo=t,t=a)):(Oo=t,t=a),t===a&&(t=null),Io=e,wo()}function zo(){var e,t,n,o;for(e=Oo,t=[],39===r.charCodeAt(Oo)?(n=Dr,Oo++):(n=a,0===So&&No(Zt));n!==a;)t.push(n),39===r.charCodeAt(Oo)?(n=Dr,Oo++):(n=a,0===So&&No(Zt));for(n=[],44===r.charCodeAt(Oo)?(o=Jr,Oo++):(o=a,0===So&&No($t));o!==a;)n.push(o),44===r.charCodeAt(Oo)?(o=Jr,Oo++):(o=a,0===So&&No($t));return Io=e,yo(t,n)}function Wo(){var e,t;for(So++,e=[],fe.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(en));t!==a;)e.push(t),fe.test(r.charAt(Oo))?(t=r.charAt(Oo),Oo++):(t=a,0===So&&No(en));return So--,t=a,0===So&&No(rn),e}function Xo(){var e,t,n,o;for(So++,e=[],r.substr(Oo,3)===Tr?(t=Tr,Oo+=3):(t=a,0===So&&No(nn)),t===a&&(t=Oo,n=Wo(),8594===r.charCodeAt(Oo)?(o=Gr,Oo++):(o=a,0===So&&No(on)),o!==a?t=n=[n,o,Wo()]:(Oo=t,t=a));t!==a;)e.push(t),r.substr(Oo,3)===Tr?(t=Tr,Oo+=3):(t=a,0===So&&No(nn)),t===a&&(t=Oo,n=Wo(),8594===r.charCodeAt(Oo)?(o=Gr,Oo++):(o=a,0===So&&No(on)),o!==a?t=n=[n,o,Wo()]:(Oo=t,t=a));return So--,t=a,0===So&&No(tn),e}let Yo=0,Zo="ionian";if((s=i())!==a&&Oo===r.length)return s;throw s!==a&&Oo<r.length&&No({type:"end"}),$o=Eo,rs=xo<r.length?r.charAt(xo):null,es=xo<r.length?Mo(xo,xo+1):Mo(xo,xo),new n(n.buildMessage($o,rs),$o,rs,es);var $o,rs,es}}}},e={};function t(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return r[n](s,s.exports,t),s.exports}t.d=(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),t.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n={};return(()=>{t.r(n),t.d(n,{chord2mml:()=>w});var r=t(699);function e(r,e,t){for(var n=e.length*t,o=0,s=e;o<s.length;o++)r[s[o]].noteLength=n;return r}var o=function(r,e,t){if(t||2===arguments.length)for(var n,o=0,s=e.length;o<s;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return r.concat(n||Array.prototype.slice.call(e))};function s(r){return delete r.event,delete r.root,delete r.quality,delete r.inversion,delete r.octaveOffset,delete r.upperRoot,delete r.upperQuality,delete r.upperInversion,delete r.upperOctaveOffset,delete r.lowerRoot,delete r.lowerQuality,delete r.lowerInversion,delete r.lowerOctaveOffset,r}function a(r,e,t,n,o){var s=h(r,e);return p(s=v(s,t,n),12*o)}function u(r,e,t,n,o,s,a){var u=[t],f=h(r,e),l=c(f=i(f=v(f,n,o),u),s,u,a);return p(l,-12)}function c(r,e,t,n){if(t=p(t,12*n),(r=p(r,12*e))[0]<=t[t.length-1])throw new Error("ERROR : lowerとupperが衝突しました lowerNotes:".concat(t," upperNotes:").concat(r));var s=[];return s.push.apply(s,o(o([],t,!1),r,!1)),s}function i(r,e){for(;r[0]<=e[e.length-1];)r=p(r,12);return r}function f(r,e,t,n,o){if("root"==n){var s=[r],a=h(r,e);return p(c(a=d(a,t),o,s,o),-12)}return d(p(h(r,e),12*o),t)}function l(r,e,t,n,o,s,a,u){var f=h(r,e),l=h(n,o),b=c(f=i(f=v(f,t,""),l=v(l,s,"")),a,l,u);return p(b,-12)}function h(r,e){var t=e.split(","),n=[];switch(t[0]){case"maj":n=[0,4,7];break;case"maj7":n=[0,4,7,11];break;case"min":n=[0,3,7];break;case"min7":n=[0,3,7,10];break;case"sus2":n=[0,2,7];break;case"sus4":n=[0,5,7];break;case"7sus2":n=[0,2,7,10];break;case"7sus4":n=[0,5,7,10];break;case"dim triad":n=[0,3,6];break;case"aug":n=[0,4,8];break;case"6":n=[0,4,7,9];break;case"7":n=[0,4,7,10];break;case"9":n=[0,4,7,10,14];break;case"11":n=[0,4,7,10,14,17];break;case"13":n=[0,4,7,10,14,17,21]}for(var o=0,s=t;o<s.length;o++)switch(s[o]){case"omit1":n=n.filter((function(r){return 0!==r}));break;case"omit3":n=n.filter((function(r){return![3,4].includes(r)}));break;case"omit5":n=n.filter((function(r){return 7!==r}));break;case"add2":n=b(n,2);break;case"add9":n=b(n,14);break;case"add4":n=b(n,5);break;case"add11":n=b(n,17);break;case"add6":n=b(n,9);break;case"add13":n=b(n,21);break;case"flatted fifth":n=n.map((function(r){return 7===r?6:r}));break;case"augmented fifth":n=n.map((function(r){return 7===r?8:r}))}return p(n,r)}function b(r,e){return r.includes(e)||(r.push(e),r.sort((function(r,e){return r-e}))),r}function v(r,e,t){switch(e){case"1st inv":r=g(r,1);break;case"2nd inv":r=g(r,2);break;case"3rd inv":r=g(r,3)}switch(t){case"drop2":r=function(r){if(r.length<2)return r;var e=r[r.length-2]-12;return r.splice(r.length-2,1),r.unshift(e),r}(r);break;case"drop4":r=function(r){if(r.length<4)return r;var e=r[r.length-4]-12;return r.splice(r.length-4,1),r.unshift(e),r}(r);break;case"drop2and4":r=function(r){if(r.length<4)return r;var e=r[r.length-2]-12,t=r[r.length-4]-12;return r.splice(r.length-2,1),r.splice(r.length-4+1,1),r.unshift(e),r.unshift(t),r}(r)}return r}function p(r,e){for(var t=0;t<r.length;t++)r[t]+=e;return r}function d(r,e){for(var t=!1,n=0,o=r;n<o.length;n++){if(o[n],(r[0]%12+12)%12==(e%12+12)%12){t=!0;break}r.push(r.shift())}if(t)return A(r);throw new Error("ERROR : ".concat(JSON.stringify(r)," を転回しようとしましたが、chordに ").concat(JSON.stringify(e)," が含まれていません。chordに含まれるnoteを指定してください。"))}function g(r,e){for(var t=0;t<e;t++)r.push(r.shift());return A(r)}function A(r){for(var e=-128,t=0;t<r.length;t++){for(var n=-128;n<128&&!(r[t]>e);n+=12)r[t]+=12;e=r[t]}return r}function m(r,e,t){var n=function(r,e,t){for(var n=e.map((function(e){return e+r})).map((function(r){return r%12})).sort((function(r,e){return r-e})),o=0;o<t.length;o++)if(JSON.stringify(t[o])===JSON.stringify(n))return o;throw new Error("ERROR : isSharpByKeyAndScale searchIonians")}(r,e,t);switch(n){case 0:case 2:case 4:case 7:case 9:case 11:return!0;case 1:case 3:case 5:case 6:case 8:case 10:return!1;default:throw new Error("ERROR : isSharpByKeyAndScale")}}var w={parse:r.parse};w.parse=function(t){var n=(0,r.parse)(t);return function(r){for(var e=function(r){for(var e=[],t=function(t){var n=r.map((function(r){return(r+t)%12}));e.push(n)},n=0;n<12;n++)t(n);return e}([0,2,4,5,7,9,11]).map((function(r){return r.sort((function(r,e){return r-e}))})),t="",n={event:"key",root:"C",sharpLength:0,flatLength:0,offset:0},o={event:"scale",offsets:[0,2,4,5,7,9,11]},s=m(n.offset,o.offsets,e),a=0,u=r;a<u.length;a++){var c=u[a];switch(c.event){case"inline mml":t+=c.mml;continue;case"bar":t+="/*|*/";continue;case"key":s=m((n=c).offset,o.offsets,e);continue;case"scale":o=c,s=m(n.offset,o.offsets,e);continue}var i=c.notes;if(i){var f=0;i.length&&(t+="'");for(var l=i[0];l<0;)l+=12,t+=">",f--;for(var h=0;h<i.length;h++){for(var b=i[h],v=Math.floor(b/12);v>f;)t+="<",f++;if(s)switch((b%12+12)%12){case 0:t+="c";break;case 1:t+="c+";break;case 2:t+="d";break;case 3:t+="d+";break;case 4:t+="e";break;case 5:t+="f";break;case 6:t+="f+";break;case 7:t+="g";break;case 8:t+="g+";break;case 9:t+="a";break;case 10:t+="a+";break;case 11:t+="b"}else switch((b%12+12)%12){case 0:t+="c";break;case 1:t+="d-";break;case 2:t+="d";break;case 3:t+="e-";break;case 4:t+="e";break;case 5:t+="f";break;case 6:t+="g-";break;case 7:t+="g";break;case 8:t+="a-";break;case 9:t+="a";break;case 10:t+="b-";break;case 11:t+="b"}!h&&c.noteLength&&(t+=c.noteLength)}i.length&&(t+="'")}}return t}(function(r){for(var e,t,n,o,c=[],i="root inv",h="close",b="no bass",v=0,p=0,d=0,g=r;d<g.length;d++){var A=g[d];switch(A.event){case"chord":A.notes=a(A.root,A.quality,null!==(e=A.inversion)&&void 0!==e?e:i,h,v+A.octaveOffset),A=s(A),c.push(A);break;case"chord over bass note":A.notes=u(A.upperRoot,A.upperQuality,A.lowerRoot,null!==(t=A.upperInversion)&&void 0!==t?t:i,h,v+A.upperOctaveOffset,p+A.lowerOctaveOffset),A=s(A),c.push(A);break;case"inversion":A.notes=f(A.upperRoot,A.upperQuality,A.lowerRoot,b,v+A.upperOctaveOffset),A=s(A),c.push(A);break;case"polychord":A.notes=l(A.upperRoot,A.upperQuality,null!==(n=A.upperInversion)&&void 0!==n?n:i,A.lowerRoot,A.lowerQuality,null!==(o=A.lowerInversion)&&void 0!==o?o:i,v+A.upperOctaveOffset,p+A.lowerOctaveOffset),A=s(A),c.push(A);break;case"change inversion mode to root inv":i="root inv";break;case"change inversion mode to 1st inv":i="1st inv";break;case"change inversion mode to 2nd inv":i="2nd inv";break;case"change inversion mode to 3rd inv":i="3rd inv";break;case"change open harmony mode to close":h="close";break;case"change open harmony mode to drop2":h="drop2";break;case"change open harmony mode to drop4":h="drop4";break;case"change open harmony mode to drop2and4":h="drop2and4";break;case"change bass play mode to root":b="root";break;case"change bass play mode to no bass":b="no bass";break;case"octave up":v++,p++;break;case"octave up upper":v++;break;case"octave up lower":p++;break;case"octave down":v--,p--;break;case"octave down upper":v--;break;case"octave down lower":p--;break;default:c.push(A)}}return c}(n=function(r){for(var t="chord over bass note",n="no bass",o=0,s=r;o<s.length;o++){var a=s[o];switch(a.event){case"change slash chord mode to chord over bass note":t="chord over bass note";break;case"change slash chord mode to inversion":t="inversion";break;case"change slash chord mode to polychord":t="polychord";break;case"slash chord":a.event=t;break;case"change bass play mode to root":n="root";break;case"change bass play mode to no bass":n="no bass";break;case"chord":"root"==n&&(a.event="chord over bass note",a.upperRoot=a.root,a.upperQuality=a.quality,a.upperInversion=a.inversion,a.upperOctaveOffset=a.octaveOffset,a.lowerRoot=a.root,a.lowerQuality=a.quality,a.lowerInversion=a.inversion,a.lowerOctaveOffset=a.octaveOffset,delete a.root,delete a.quality,delete a.inversion,delete a.octaveOffset)}}return r=function(r){for(var t=0,n=1,o=[],s=0;s<r.length;s++){var a=r[s];switch(a.event){case"chord":case"chord over bass note":case"inversion":case"polychord":a.noteLength=1,o.push(s);break;case"bar":t++,r=e(r,o,n),o=[],n=1;break;case"bar slash":t++,r=e(r,o,n=2),o=[]}}return t&&(r=e(r,o,n)),r}(r),r}(n)))}})(),n})()));