!function(r,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t=e();for(var n in t)("object"==typeof exports?exports:r)[n]=t[n]}}(self,(()=>(()=>{"use strict";var r={699:r=>{function e(r,t,n,o){var u=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(u,e.prototype),u.expected=t,u.found=n,u.location=o,u.name="SyntaxError",u}function t(r,e,t){return t=t||" ",r.length>e?r:(e-=r.length,r+(t+=t.repeat(e)).slice(0,e))}!function(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}(e,Error),e.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var n,o=null;for(n=0;n<r.length;n++)if(r[n].source===this.location.source){o=r[n].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(u):u,c=this.location.source+":"+a.line+":"+a.column;if(o){var s=this.location.end,i=t("",a.line.toString().length," "),l=o[u.line-1],f=(u.line===s.line?s.column:l.length+1)-u.column||1;e+="\n --\x3e "+c+"\n"+i+" |\n"+a.line+" | "+l+"\n"+i+" | "+t("",u.column-1," ")+t("",f,"^")}else e+="\n at "+c}return e},e.buildMessage=function(r,e){var t={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var e=r.parts.map((function(r){return Array.isArray(r)?u(r[0])+"-"+u(r[1]):u(r)}));return"["+(r.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function u(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return t[r.type](r)}return"Expected "+function(r){var e,t,n=r.map(a);if(n.sort(),n.length>0){for(e=1,t=1;e<n.length;e++)n[e-1]!==n[e]&&(n[t]=n[e],t++);n.length=t}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(e)+" found."},r.exports={SyntaxError:e,parse:function(r,t){var n,o,u,a,c={},s=(t=void 0!==t?t:{}).grammarSource,i={CHORDS:kr},l=kr,f="/",p="on",h="compound chord",v="inversion",b="inv",d="upper structure",g="ust",m="us",y="polychord",x="poly",w="/*",A="*/",k="maj",C="M",j="maj7",R="△",S=/^[^*\/]/,F=/^[A-G]/,L=/^[#\uFF03\u266F]/,O=/^[b\u266D]/,E=/^[ \t\n\r]/,Q=mr("/",!1),M=mr("on",!1),P=mr("compound chord",!0),D=mr("inversion",!0),G=mr("inv",!0),T=mr("upper structure",!0),U=mr("UST",!0),q=mr("US",!0),_=mr("polychord",!0),B=mr("poly",!0),H=mr("/*",!1),z=yr(["*","/"],!0,!1),I=mr("*/",!1),J=yr([["A","G"]],!1,!1),K=yr(["#","＃","♯"],!1,!1),N=yr(["b","♭"],!1,!1),V=mr("maj",!0),W=mr("M",!1),X=mr("maj7",!0),Y=mr("△",!1),Z={type:"other",description:"whitespace"},$=yr([" ","\t","\n","\r"],!1,!1),rr=function(r,e){return{event:"chord",root:r,quality:e}},er=function(r,e,t,n){return{event:"slash chord",upperRoot:r,upperQuality:e,lowerRoot:t,lowerQuality:n}},tr=function(r,e,t,n){return{event:"compound chord",upperRoot:r,upperQuality:e,lowerRoot:t,lowerQuality:n}},nr=function(){return{event:"compound chord"}},or=function(){return{event:"inversion"}},ur=function(){return{event:"upper structure"}},ar=function(r){return{event:"inline mml",mml:r.join("")}},cr=function(r,e,t){let n;switch(r){case"C":n=0;break;case"D":n=2;break;case"E":n=4;break;case"F":n=5;break;case"G":n=7;break;case"A":n=9;break;case"B":n=11}return n+=e.length-t.length,n%=12,n},sr=function(){return"#"},ir=function(){return"b"},lr=function(r){return r},fr=function(){return"maj"},pr=function(){return"maj7"},hr=0,vr=[{line:1,column:1}],br=0,dr=[],gr=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');l=i[t.startRule]}function mr(r,e){return{type:"literal",text:r,ignoreCase:e}}function yr(r,e,t){return{type:"class",parts:r,inverted:e,ignoreCase:t}}function xr(e){var t,n=vr[e];if(n)return n;for(t=e-1;!vr[t];)t--;for(n={line:(n=vr[t]).line,column:n.column};t<e;)10===r.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return vr[e]=n,n}function wr(r,e,t){var n=xr(r),o=xr(e),u={source:s,start:{offset:r,line:n.line,column:n.column},end:{offset:e,line:o.line,column:o.column}};return t&&s&&"function"==typeof s.offset&&(u.start=s.offset(u.start),u.end=s.offset(u.end)),u}function Ar(r){hr<br||(hr>br&&(br=hr,dr=[]),dr.push(r))}function kr(){var r,e;for(r=[],e=Cr();e!==c;)r.push(e),e=Cr();return r}function Cr(){var e;return(e=function(){var e,t,n,o;if(e=hr,r.substr(hr,2)===w?(t=w,hr+=2):(t=c,0===gr&&Ar(H)),t!==c){if(n=[],S.test(r.charAt(hr))?(o=r.charAt(hr),hr++):(o=c,0===gr&&Ar(z)),o!==c)for(;o!==c;)n.push(o),S.test(r.charAt(hr))?(o=r.charAt(hr),hr++):(o=c,0===gr&&Ar(z));else n=c;n!==c?(r.substr(hr,2)===A?(o=A,hr+=2):(o=c,0===gr&&Ar(I)),o!==c?e=ar(n):(hr=e,e=c)):(hr=e,e=c)}else hr=e,e=c;return e}())===c&&(e=function(){var e,t;return e=hr,Lr(),r.substr(hr,14).toLowerCase()===h?(t=r.substr(hr,14),hr+=14):(t=c,0===gr&&Ar(P)),t!==c?(Lr(),e=nr()):(hr=e,e=c),e}())===c&&(e=function(){var e,t;return e=hr,Lr(),r.substr(hr,15).toLowerCase()===d?(t=r.substr(hr,15),hr+=15):(t=c,0===gr&&Ar(T)),t===c&&(r.substr(hr,3).toLowerCase()===g?(t=r.substr(hr,3),hr+=3):(t=c,0===gr&&Ar(U)),t===c&&(r.substr(hr,2).toLowerCase()===m?(t=r.substr(hr,2),hr+=2):(t=c,0===gr&&Ar(q)),t===c&&(r.substr(hr,9).toLowerCase()===y?(t=r.substr(hr,9),hr+=9):(t=c,0===gr&&Ar(_)),t===c&&(r.substr(hr,4).toLowerCase()===x?(t=r.substr(hr,4),hr+=4):(t=c,0===gr&&Ar(B)))))),t!==c?(Lr(),e=ur()):(hr=e,e=c),e}())===c&&(e=function(){var e,t;return e=hr,Lr(),r.substr(hr,9).toLowerCase()===v?(t=r.substr(hr,9),hr+=9):(t=c,0===gr&&Ar(D)),t===c&&(r.substr(hr,3).toLowerCase()===b?(t=r.substr(hr,3),hr+=3):(t=c,0===gr&&Ar(G))),t!==c?(Lr(),e=or()):(hr=e,e=c),e}())===c&&(e=function(){var e,t,n,o,u,a;return e=hr,Lr(),(t=jr())!==c&&(n=Fr())!==c?(47===r.charCodeAt(hr)?(o=f,hr++):(o=c,0===gr&&Ar(Q)),o!==c&&(u=jr())!==c&&(a=Fr())!==c?(Lr(),e=er(t,n,u,a)):(hr=e,e=c)):(hr=e,e=c),e}())===c&&(e=function(){var e,t,n,o,u,a;return e=hr,Lr(),(t=jr())!==c&&(n=Fr())!==c?(r.substr(hr,2)===p?(o=p,hr+=2):(o=c,0===gr&&Ar(M)),o!==c&&(u=jr())!==c&&(a=Fr())!==c?(Lr(),e=tr(t,n,u,a)):(hr=e,e=c)):(hr=e,e=c),e}())===c&&(e=function(){var r,e,t;return r=hr,Lr(),(e=jr())!==c&&(t=Fr())!==c?(Lr(),r=rr(e,t)):(hr=r,r=c),r}()),e}function jr(){var e,t,n,o,u;if(e=hr,F.test(r.charAt(hr))?(t=r.charAt(hr),hr++):(t=c,0===gr&&Ar(J)),t!==c){for(n=[],o=Rr();o!==c;)n.push(o),o=Rr();for(o=[],u=Sr();u!==c;)o.push(u),u=Sr();e=cr(t,n,o)}else hr=e,e=c;return e}function Rr(){var e;return hr,L.test(r.charAt(hr))?(e=r.charAt(hr),hr++):(e=c,0===gr&&Ar(K)),e!==c&&(e=sr()),e}function Sr(){var e;return hr,O.test(r.charAt(hr))?(e=r.charAt(hr),hr++):(e=c,0===gr&&Ar(N)),e!==c&&(e=ir()),e}function Fr(){var e;return hr,(e=function(){var e;return hr,r.substr(hr,4).toLowerCase()===j?(e=r.substr(hr,4),hr+=4):(e=c,0===gr&&Ar(X)),e===c&&(9651===r.charCodeAt(hr)?(e=R,hr++):(e=c,0===gr&&Ar(Y))),e!==c&&(e=pr()),e}())===c&&(e=function(){var e;return hr,r.substr(hr,3).toLowerCase()===k?(e=r.substr(hr,3),hr+=3):(e=c,0===gr&&Ar(V)),e===c&&(77===r.charCodeAt(hr)?(e=C,hr++):(e=c,0===gr&&Ar(W)),e===c&&(e="")),e!==c&&(e=fr()),e}()),e!==c&&(e=lr(e)),e}function Lr(){var e,t;for(gr++,e=[],E.test(r.charAt(hr))?(t=r.charAt(hr),hr++):(t=c,0===gr&&Ar($));t!==c;)e.push(t),E.test(r.charAt(hr))?(t=r.charAt(hr),hr++):(t=c,0===gr&&Ar($));return gr--,t=c,0===gr&&Ar(Z),e}if((n=l())!==c&&hr===r.length)return n;throw n!==c&&hr<r.length&&Ar({type:"end"}),o=dr,u=br<r.length?r.charAt(br):null,a=br<r.length?wr(br,br+1):wr(br,br),new e(e.buildMessage(o,u),o,u,a)}}}},e={};function t(n){var o=e[n];if(void 0!==o)return o.exports;var u=e[n]={exports:{}};return r[n](u,u.exports,t),u.exports}t.d=(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),t.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n={};return(()=>{t.r(n),t.d(n,{chord2mml:()=>l});var r=t(699),e=function(r,e,t){if(t||2===arguments.length)for(var n,o=0,u=e.length;o<u;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return r.concat(n||Array.prototype.slice.call(e))};function o(r,e){var t=[];switch(e){case"maj":t=[0,4,7];break;case"maj7":t=[0,4,7,11]}return u(t,r)}function u(r,e){for(var t=0;t<r.length;t++)r[t]+=e;return r}function a(r,e,t){var n=[];n.push(t);var a=function(r,e,t){var n=o(r,e);return r<=t&&(n=u(n,12)),n}(r,e,t);return n.push.apply(n,a),n}function c(r,e,t){var n=o(r,e);return s(n=function(r,e){for(var t=0;t<r.length&&r[0]!=e;t++)r.push(r.shift());return r}(n,t))}function s(r){for(var e=-1,t=0;t<r.length;t++){for(var n=0;n<128&&!(r[t]>e);n+=12)r[t]+=12;e=r[t]}return r}function i(r,t,n,u){var a=o(n,u),c=o(r,t),i=e(e([],a,!0),c,!0);return s(i)}var l={parse:(r.parse,function(e){var t=(0,r.parse)(e);return function(r){for(var e="",t=0;t<r.length;t++){var n=r[t];if("inline mml"!=n.event){var o=0;n.length&&(e+="'");for(var u=0;u<n.length;u++){var a=n[u],c=Math.floor(a/12);switch(c>o&&(e+="<",o=c),a%12){case 0:e+="c";break;case 1:e+="c+";break;case 2:e+="d";break;case 3:e+="d+";break;case 4:e+="e";break;case 5:e+="f";break;case 6:e+="f+";break;case 7:e+="g";break;case 8:e+="g+";break;case 9:e+="a";break;case 10:e+="a+";break;case 11:e+="b"}}n.length&&(e+="'")}else e+=n.mml}return e}(function(r){for(var e=[],t=0;t<r.length;t++){var n=r[t],u=void 0;switch(n.event){case"chord":u=o(n.root,n.quality),e.push(u);break;case"compound chord":u=a(n.upperRoot,n.upperQuality,n.lowerRoot),e.push(u);break;case"inversion":u=c(n.upperRoot,n.upperQuality,n.lowerRoot),e.push(u);break;case"upper structure":u=i(n.upperRoot,n.upperQuality,n.lowerRoot,n.lowerQuality),e.push(u);break;case"inline mml":e.push(n)}}return e}(t=function(r){for(var e="compound chord",t=0;t<r.length;t++){var n=r[t];switch(n.event){case"compound chord":case"inversion":case"upper structure":e=n.event;break;case"slash chord":n.event=e}}return r}(t)))})}})(),n})()));