!function(r,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e=t();for(var n in e)("object"==typeof exports?exports:r)[n]=e[n]}}(self,(()=>(()=>{"use strict";var r={699:r=>{function t(r){switch(r){case"ionian":return[0,2,4,5,7,9,11];case"dorian":return[0,2,3,5,7,9,10];case"phrygian":return[0,1,3,5,7,8,10];case"lydian":return[0,2,4,6,7,9,11];case"mixolydian":return[0,2,4,5,7,9,10];case"aeolian":return[0,2,3,5,7,8,10];case"locrian":return[0,1,3,5,6,8,10];default:throw new Error("ERROR : getOffsetsByScale")}}function e(r,t,e){let n;switch(r){case"C":n=0;break;case"D":n=2;break;case"E":n=4;break;case"F":n=5;break;case"G":n=7;break;case"A":n=9;break;case"B":n=11;break;default:throw new Error("ERROR : getRootCdefgabOffset")}return n+=t.length-e.length,n}function n(r,t,e,o){var s=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=t,s.found=e,s.location=o,s.name="SyntaxError",s}function o(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,r+(e+=e.repeat(t)).slice(0,t))}!function(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}(n,Error),n.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var e,n=null;for(e=0;e<r.length;e++)if(r[e].source===this.location.source){n=r[e].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,u=this.location.source+":"+a.line+":"+a.column;if(n){var c=this.location.end,i=o("",a.line.toString().length," "),f=n[s.line-1],l=(s.line===c.line?c.column:f.length+1)-s.column||1;t+="\n --\x3e "+u+"\n"+i+" |\n"+a.line+" | "+f+"\n"+i+" | "+o("",s.column-1," ")+o("",l,"^")}else t+="\n at "+u}return t},n.buildMessage=function(r,t){var e={literal:function(r){return'"'+o(r.text)+'"'},class:function(r){var t=r.parts.map((function(r){return Array.isArray(r)?s(r[0])+"-"+s(r[1]):s(r)}));return"["+(r.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function o(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function s(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function a(r){return e[r.type](r)}return"Expected "+function(r){var t,e,n=r.map(a);if(n.sort(),n.length>0){for(t=1,e=1;t<n.length;t++)n[t-1]!==n[t]&&(n[e]=n[t],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(r)+" but "+function(r){return r?'"'+o(r)+'"':"end of input"}(t)+" found."},r.exports={SyntaxError:n,parse:function(r,o){var s,a={},u=(o=void 0!==o?o:{}).grammarSource,c={CHORDS:$o},i=$o,f="/",l="on",h="over",b="chord over bass note",v="slash chord inversion",d="upper structure triad",p="upper structure",A="ust",g="us",m="polychord",w="poly",C="/*",y="*/",k="*",L="/*/*",O="*/*/",I="root inv",R="1st inv",x="2nd inv",E="3rd inv",j="close harmony",S="close",V="drop2",F="drop-2",Q="open triad",M="drop4",N="drop-4",P="drop2and4",q="drop-2-and-4",B="no bass",D="bass is root",J="bass plays root",T="bass play root",G="bpm",U="tempo",K="|",_="/ ",H="key",z="minor",W="m",X="ionian",Y="dorian",Z="phrygian",$="lydian",rr="mixolydian",tr="aeolian",er="locrian",nr="octave",or="up",sr="down",ar="VII",ur="III",cr="VI",ir="IV",fr="II",lr="V",hr="I",br="maj",vr="M",dr="maj7",pr="M7",Ar="△",gr="(",mr="9",wr=")",Cr="min",yr="-",kr="min7",Lr="m7",Or="-7",Ir="6",Rr="7",xr="11",Er="13",jr="sus2",Sr="sus4",Vr="7sus2",Fr="7sus4",Qr="dim",Mr="aug",Nr="4.",Pr="(b5)",qr="(-5)",Br="(+5)",Dr="(#5)",Jr="omit",Tr="o",Gr="add",Ur="^",Kr="'",_r=",",Hr=" - ",zr="→",Wr="strings",Xr="ensemble",Yr="1",Zr="str.",$r="2",rt="voice aahs",tt="choir aahs",et="choir",nt="chor.",ot=/^[,.]/,st=/^[^*\/]/,at=/^[^\/]/,ut=/^[0-9]/,ct=/^[ =:]/,it=/^[A-G]/,ft=/^[ \-]/,lt=/^[1-7]/,ht=/^[#\uFF03\u266F]/,bt=/^[b\u266D]/,vt=/^[2-9]/,dt=/^[135]/,pt=/^[0-3]/,At=/^[ \t\n\r]/,gt=zo("/",!1),mt=zo("on",!1),wt=zo("over",!1),Ct=zo("chord over bass note",!0),yt=Wo([",","."],!1,!1),kt=zo("slash chord inversion",!0),Lt=zo("upper structure triad",!0),Ot=zo("upper structure",!0),It=zo("UST",!0),Rt=zo("US",!0),xt=zo("polychord",!0),Et=zo("poly",!0),jt=zo("/*",!1),St=Wo(["*","/"],!0,!1),Vt=zo("*/",!1),Ft=zo("*",!1),Qt=Wo(["/"],!0,!1),Mt=zo("/*/*",!1),Nt=zo("*/*/",!1),Pt=zo("root inv",!0),qt=zo("1st inv",!0),Bt=zo("2nd inv",!0),Dt=zo("3rd inv",!0),Jt=zo("close harmony",!0),Tt=zo("close",!0),Gt=zo("drop2",!0),Ut=zo("drop-2",!0),Kt=zo("open triad",!0),_t=zo("drop4",!0),Ht=zo("drop-4",!0),zt=zo("drop2and4",!0),Wt=zo("drop-2-and-4",!0),Xt=zo("no bass",!0),Yt=zo("bass is root",!0),Zt=zo("bass plays root",!0),$t=zo("bass play root",!0),re=zo("BPM",!0),te=zo("TEMPO",!0),ee=Wo([["0","9"]],!1,!1),ne=zo("|",!1),oe=zo("/ ",!1),se=zo("key",!0),ae=Wo([" ","=",":"],!1,!1),ue=Wo([["A","G"]],!1,!1),ce=zo("minor",!0),ie=zo("m",!1),fe=zo("ionian",!0),le=zo("dorian",!0),he=zo("phrygian",!0),be=zo("lydian",!0),ve=zo("mixolydian",!0),de=zo("aeolian",!0),pe=zo("locrian",!0),Ae=zo("octave",!0),ge=Wo([" ","-"],!1,!1),me=zo("up",!0),we=zo("down",!0),Ce=zo("VII",!1),ye=zo("III",!1),ke=zo("VI",!1),Le=zo("IV",!1),Oe=zo("II",!1),Ie=zo("V",!1),Re=zo("I",!1),xe=Wo([["1","7"]],!1,!1),Ee=Wo(["#","＃","♯"],!1,!1),je=Wo(["b","♭"],!1,!1),Se=zo("maj",!0),Ve=zo("M",!1),Fe=zo("maj7",!0),Qe=zo("M7",!1),Me=zo("△",!1),Ne=zo("(",!1),Pe=zo("9",!1),qe=zo(")",!1),Be=zo("min",!0),De=zo("-",!1),Je=zo("min7",!0),Te=zo("m7",!1),Ge=zo("-7",!1),Ue=zo("6",!1),Ke=zo("7",!1),_e=zo("11",!1),He=zo("13",!1),ze=zo("sus2",!1),We=zo("sus4",!1),Xe=zo("7sus2",!1),Ye=zo("7sus4",!1),Ze=zo("dim",!1),$e=zo("aug",!1),rn=zo("4.",!1),tn=Wo([["2","9"]],!1,!1),en=zo("(b5)",!1),nn=zo("(-5)",!1),on=zo("(+5)",!1),sn=zo("(#5)",!1),an=zo("omit",!1),un=zo("o",!1),cn=Wo(["1","3","5"],!1,!1),fn=zo("add",!1),ln=zo("^",!1),hn=Wo([["0","3"]],!1,!1),bn=zo("'",!1),vn=zo(",",!1),dn={type:"other",description:"whitespace"},pn=Wo([" ","\t","\n","\r"],!1,!1),An=zo(" - ",!1),gn=zo("→",!1),mn={type:"any"},wn=zo("Strings",!0),Cn=zo("Ensemble",!0),yn=zo("1",!1),kn=zo("Str.",!0),Ln=zo("2",!1),On=zo("Voice Aahs",!0),In=zo("Choir Aahs",!0),Rn=zo("Choir",!0),xn=zo("Chor.",!0),En=function(r){return r},jn=function(r,t,e,n){return{event:"chord",root:r,quality:t,inversion:e,octaveOffset:n}},Sn=function(r,t,e,n,o,s,a,u){return o??=r,s??=t,{event:"slash chord",upperRoot:r,upperQuality:t,upperInversion:e,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},Vn=function(r,t,e,n,o,s,a,u){return o??=r,s??=t,{event:"chord over bass note",upperRoot:r,upperQuality:t,upperInversion:e,upperOctaveOffset:n,lowerRoot:o,lowerQuality:s,lowerInversion:a,lowerOctaveOffset:u}},Fn=function(){return{event:"change slash chord mode to chord over bass note"}},Qn=function(){return{event:"change slash chord mode to inversion"}},Mn=function(){return{event:"change slash chord mode to polychord"}},Nn=function(r){return{event:"inline mml",mml:r.join("")}},Pn=function(){return Ho()},qn=function(r){return{event:"inline mml",mml:"/*"+r.join("")+"*/"}},Bn=function(){return{event:"change inversion mode to root inv"}},Dn=function(){return{event:"change inversion mode to 1st inv"}},Jn=function(){return{event:"change inversion mode to 2nd inv"}},Tn=function(){return{event:"change inversion mode to 3rd inv"}},Gn=function(){return{event:"change open harmony mode to close"}},Un=function(){return{event:"change open harmony mode to drop2"}},Kn=function(){return{event:"change open harmony mode to drop4"}},_n=function(){return{event:"change open harmony mode to drop2and4"}},Hn=function(){return{event:"change bass play mode to no bass"}},zn=function(){return{event:"change bass play mode to root"}},Wn=function(r){return{event:"inline mml",mml:"t"+r.join("")}},Xn=function(){return{event:"bar"}},Yn=function(){return{event:"bar slash"}},Zn=function(r){return r},$n=function(r,t,n,o){return ds=e(r,t,n),{event:"key",root:r,sharpLength:t.length,flatLength:n.length,offset:ds}},ro=function(r){return ps=r.toLowerCase(),{event:"scale",offsets:t(ps)}},to=function(){return{event:"octave up"}},eo=function(){return{event:"octave up upper"}},no=function(){return{event:"octave up lower"}},oo=function(){return{event:"octave down"}},so=function(){return{event:"octave down upper"}},ao=function(){return{event:"octave down lower"}},uo=function(r,t,n){return e(r,t,n)},co=function(r,e,n){let o=function(r){return t("ionian")[function(r){switch(r){case"I":case"1":return 0;case"II":case"2":return 1;case"III":case"3":return 2;case"IV":case"4":return 3;case"V":case"5":return 4;case"VI":case"6":return 5;case"VII":case"7":return 6;default:throw new Error("ERROR : getDegreeIndex")}}(r)]}(n);return o+=r.length-e.length+ds,o},io=function(){return"#"},fo=function(){return"b"},lo=function(r){return r.join("")},ho=function(){return"maj"},bo=function(){return"maj"},vo=function(){return"maj7"},po=function(){return"maj7,add9"},Ao=function(){return"min"},go=function(){return"min"},mo=function(){return"min7"},wo=function(){return"6"},Co=function(){return"7"},yo=function(){return"9"},ko=function(){return"11"},Lo=function(){return"13"},Oo=function(){return"sus2"},Io=function(){return"sus4"},Ro=function(){return"7sus2"},xo=function(){return"7sus4"},Eo=function(){return"dim triad"},jo=function(){return"aug"},So=function(r){return Ho()},Vo=function(){return",flatted fifth"},Fo=function(){return",augmented fifth"},Qo=function(r){return",omit"+r},Mo=function(r){return",add"+r.join("")},No=function(){switch(Ho()){case"":return null;case"^0":return"root inv";case"^1":return"1st inv";case"^2":return"2nd inv";case"^3":return"3rd inv";default:throw new Error("ERROR : INVERSION")}},Po=function(r,t){return r.length-t.length},qo=function(){return{event:"inline mml",mml:"@48"}},Bo=function(){return{event:"inline mml",mml:"@49"}},Do=function(){return{event:"inline mml",mml:"@52"}},Jo=0,To=0,Go=[{line:1,column:1}],Uo=0,Ko=[],_o=0;if("startRule"in o){if(!(o.startRule in c))throw new Error("Can't start parsing from rule \""+o.startRule+'".');i=c[o.startRule]}function Ho(){return r.substring(To,Jo)}function zo(r,t){return{type:"literal",text:r,ignoreCase:t}}function Wo(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function Xo(t){var e,n=Go[t];if(n)return n;for(e=t-1;!Go[e];)e--;for(n={line:(n=Go[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Go[t]=n,n}function Yo(r,t,e){var n=Xo(r),o=Xo(t),s={source:u,start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:o.line,column:o.column}};return e&&u&&"function"==typeof u.offset&&(s.start=u.offset(s.start),s.end=u.offset(s.end)),s}function Zo(r){Jo<Uo||(Jo>Uo&&(Uo=Jo,Ko=[]),Ko.push(r))}function $o(){var r,t,e;for(r=Jo,t=[],e=rs();e!==a;)t.push(e),e=rs();return e=hs(),To=r,En(t)}function rs(){var t;return(t=function(){var t,e,n,o;if(t=Jo,r.substr(Jo,4)===L?(e=L,Jo+=4):(e=a,0===_o&&Zo(Mt)),e!==a){if(n=[],st.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(St)),o===a&&(o=ts())===a&&(47===r.charCodeAt(Jo)?(o=f,Jo++):(o=a,0===_o&&Zo(gt))),o!==a)for(;o!==a;)n.push(o),st.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(St)),o===a&&(o=ts())===a&&(47===r.charCodeAt(Jo)?(o=f,Jo++):(o=a,0===_o&&Zo(gt)));else n=a;n!==a?(r.substr(Jo,4)===O?(o=O,Jo+=4):(o=a,0===_o&&Zo(Nt)),o!==a?(To=t,t=qn(n)):(Jo=t,t=a)):(Jo=t,t=a)}else Jo=t,t=a;return t}())===a&&(t=function(){var t,e,n,o;if(t=Jo,r.substr(Jo,2)===C?(e=C,Jo+=2):(e=a,0===_o&&Zo(jt)),e!==a){if(n=[],st.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(St)),o===a&&(o=ts())===a&&(47===r.charCodeAt(Jo)?(o=f,Jo++):(o=a,0===_o&&Zo(gt))),o!==a)for(;o!==a;)n.push(o),st.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(St)),o===a&&(o=ts())===a&&(47===r.charCodeAt(Jo)?(o=f,Jo++):(o=a,0===_o&&Zo(gt)));else n=a;n!==a?(r.substr(Jo,2)===y?(o=y,Jo+=2):(o=a,0===_o&&Zo(Vt)),o!==a?(To=t,t=Nn(n)):(Jo=t,t=a)):(Jo=t,t=a)}else Jo=t,t=a;return t}())===a&&(t=function(){var t,e;return t=Jo,hs(),r.substr(Jo,2)===_?(e=_,Jo+=2):(e=a,0===_o&&Zo(oe)),e!==a?(hs(),To=t,t=Yn()):(Jo=t,t=a),t}())===a&&(t=function(){var t;return(t=function(){var t,e,n,o,s,u,c;return t=Jo,hs(),e=Jo,r.substr(Jo,7).toLowerCase()===Wr?(n=r.substr(Jo,7),Jo+=7):(n=a,0===_o&&Zo(wn)),n!==a?(o=hs(),r.substr(Jo,8).toLowerCase()===Xr?(s=r.substr(Jo,8),Jo+=8):(s=a,0===_o&&Zo(Cn)),s!==a?(u=hs(),49===r.charCodeAt(Jo)?(c=Yr,Jo++):(c=a,0===_o&&Zo(yn)),c!==a?e=n=[n,o,s,u,c]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e===a&&(e=Jo,r.substr(Jo,7).toLowerCase()===Wr?(n=r.substr(Jo,7),Jo+=7):(n=a,0===_o&&Zo(wn)),n!==a?(o=hs(),49===r.charCodeAt(Jo)?(s=Yr,Jo++):(s=a,0===_o&&Zo(yn)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a),e===a&&(e=Jo,r.substr(Jo,4).toLowerCase()===Zr?(n=r.substr(Jo,4),Jo+=4):(n=a,0===_o&&Zo(kn)),n!==a?(o=hs(),49===r.charCodeAt(Jo)?(s=Yr,Jo++):(s=a,0===_o&&Zo(yn)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),o=hs(),To=t,t=qo()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c;return t=Jo,hs(),e=Jo,r.substr(Jo,7).toLowerCase()===Wr?(n=r.substr(Jo,7),Jo+=7):(n=a,0===_o&&Zo(wn)),n!==a?(o=hs(),r.substr(Jo,8).toLowerCase()===Xr?(s=r.substr(Jo,8),Jo+=8):(s=a,0===_o&&Zo(Cn)),s!==a?(u=hs(),50===r.charCodeAt(Jo)?(c=$r,Jo++):(c=a,0===_o&&Zo(Ln)),c!==a?e=n=[n,o,s,u,c]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e===a&&(e=Jo,r.substr(Jo,7).toLowerCase()===Wr?(n=r.substr(Jo,7),Jo+=7):(n=a,0===_o&&Zo(wn)),n!==a?(o=hs(),50===r.charCodeAt(Jo)?(s=$r,Jo++):(s=a,0===_o&&Zo(Ln)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a),e===a&&(e=Jo,r.substr(Jo,4).toLowerCase()===Zr?(n=r.substr(Jo,4),Jo+=4):(n=a,0===_o&&Zo(kn)),n!==a?(o=hs(),50===r.charCodeAt(Jo)?(s=$r,Jo++):(s=a,0===_o&&Zo(Ln)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),o=hs(),To=t,t=Bo()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,10).toLowerCase()===rt?(e=r.substr(Jo,10),Jo+=10):(e=a,0===_o&&Zo(On)),e===a&&(r.substr(Jo,10).toLowerCase()===tt?(e=r.substr(Jo,10),Jo+=10):(e=a,0===_o&&Zo(In)),e===a&&(r.substr(Jo,5).toLowerCase()===et?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(Rn)),e===a&&(r.substr(Jo,5).toLowerCase()===nt?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(xn))))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Do()):(Jo=t,t=a),t}()),t}())===a&&(t=function(){var t,e,n,o;if(t=Jo,hs(),r.substr(Jo,3).toLowerCase()===G?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(re)),e===a&&(r.substr(Jo,5).toLowerCase()===U?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(te))),e!==a){if(hs(),n=[],ut.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ee)),o!==a)for(;o!==a;)n.push(o),ut.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ee));else n=a;n!==a?(ot.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(yt)),o===a&&(o=null),hs(),To=t,t=Wn(n)):(Jo=t,t=a)}else Jo=t,t=a;return t}())===a&&(t=function(){var t,e,n,o,s;return t=Jo,hs(),e=Jo,r.substr(Jo,6).toLowerCase()===nr?(n=r.substr(Jo,6),Jo+=6):(n=a,0===_o&&Zo(Ae)),n!==a?(ft.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ge)),o!==a?(r.substr(Jo,2).toLowerCase()===or?(s=r.substr(Jo,2),Jo+=2):(s=a,0===_o&&Zo(me)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e!==a?(47===r.charCodeAt(Jo)?(n=f,Jo++):(n=a,0===_o&&Zo(gt)),n!==a?(ot.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(yt)),o===a&&(o=null),s=hs(),To=t,t=eo()):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=Jo,hs(),e=Jo,r.substr(Jo,6).toLowerCase()===nr?(n=r.substr(Jo,6),Jo+=6):(n=a,0===_o&&Zo(Ae)),n!==a?(ft.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ge)),o!==a?(r.substr(Jo,4).toLowerCase()===sr?(s=r.substr(Jo,4),Jo+=4):(s=a,0===_o&&Zo(we)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e!==a?(47===r.charCodeAt(Jo)?(n=f,Jo++):(n=a,0===_o&&Zo(gt)),n!==a?(ot.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(yt)),o===a&&(o=null),s=hs(),To=t,t=so()):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u;return t=Jo,hs(),47===r.charCodeAt(Jo)?(e=f,Jo++):(e=a,0===_o&&Zo(gt)),e!==a?(n=Jo,r.substr(Jo,6).toLowerCase()===nr?(o=r.substr(Jo,6),Jo+=6):(o=a,0===_o&&Zo(Ae)),o!==a?(ft.test(r.charAt(Jo))?(s=r.charAt(Jo),Jo++):(s=a,0===_o&&Zo(ge)),s!==a?(r.substr(Jo,2).toLowerCase()===or?(u=r.substr(Jo,2),Jo+=2):(u=a,0===_o&&Zo(me)),u!==a?n=o=[o,s,u]:(Jo=n,n=a)):(Jo=n,n=a)):(Jo=n,n=a),n!==a?(ot.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(yt)),o===a&&(o=null),s=hs(),To=t,t=no()):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u;return t=Jo,hs(),47===r.charCodeAt(Jo)?(e=f,Jo++):(e=a,0===_o&&Zo(gt)),e!==a?(n=Jo,r.substr(Jo,6).toLowerCase()===nr?(o=r.substr(Jo,6),Jo+=6):(o=a,0===_o&&Zo(Ae)),o!==a?(ft.test(r.charAt(Jo))?(s=r.charAt(Jo),Jo++):(s=a,0===_o&&Zo(ge)),s!==a?(r.substr(Jo,4).toLowerCase()===sr?(u=r.substr(Jo,4),Jo+=4):(u=a,0===_o&&Zo(we)),u!==a?n=o=[o,s,u]:(Jo=n,n=a)):(Jo=n,n=a)):(Jo=n,n=a),n!==a?(ot.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(yt)),o===a&&(o=null),s=hs(),To=t,t=ao()):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=Jo,hs(),e=Jo,r.substr(Jo,6).toLowerCase()===nr?(n=r.substr(Jo,6),Jo+=6):(n=a,0===_o&&Zo(Ae)),n!==a?(ft.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ge)),o!==a?(r.substr(Jo,2).toLowerCase()===or?(s=r.substr(Jo,2),Jo+=2):(s=a,0===_o&&Zo(me)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),o=hs(),To=t,t=to()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=Jo,hs(),e=Jo,r.substr(Jo,6).toLowerCase()===nr?(n=r.substr(Jo,6),Jo+=6):(n=a,0===_o&&Zo(Ae)),n!==a?(ft.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(ge)),o!==a?(r.substr(Jo,4).toLowerCase()===sr?(s=r.substr(Jo,4),Jo+=4):(s=a,0===_o&&Zo(we)),s!==a?e=n=[n,o,s]:(Jo=e,e=a)):(Jo=e,e=a)):(Jo=e,e=a),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),o=hs(),To=t,t=oo()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,20).toLowerCase()===b?(e=r.substr(Jo,20),Jo+=20):(e=a,0===_o&&Zo(Ct)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),To=t,t=Fn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,21).toLowerCase()===d?(e=r.substr(Jo,21),Jo+=21):(e=a,0===_o&&Zo(Lt)),e===a&&(r.substr(Jo,15).toLowerCase()===p?(e=r.substr(Jo,15),Jo+=15):(e=a,0===_o&&Zo(Ot)),e===a&&(r.substr(Jo,3).toLowerCase()===A?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(It)),e===a&&(r.substr(Jo,2).toLowerCase()===g?(e=r.substr(Jo,2),Jo+=2):(e=a,0===_o&&Zo(Rt)),e===a&&(r.substr(Jo,9).toLowerCase()===m?(e=r.substr(Jo,9),Jo+=9):(e=a,0===_o&&Zo(xt)),e===a&&(r.substr(Jo,4).toLowerCase()===w?(e=r.substr(Jo,4),Jo+=4):(e=a,0===_o&&Zo(Et))))))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),To=t,t=Mn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,21).toLowerCase()===v?(e=r.substr(Jo,21),Jo+=21):(e=a,0===_o&&Zo(kt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),To=t,t=Qn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,8).toLowerCase()===I?(e=r.substr(Jo,8),Jo+=8):(e=a,0===_o&&Zo(Pt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Bn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,7).toLowerCase()===R?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(qt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Dn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,7).toLowerCase()===x?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(Bt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Jn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,7).toLowerCase()===E?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(Dt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Tn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,9).toLowerCase()===P?(e=r.substr(Jo,9),Jo+=9):(e=a,0===_o&&Zo(zt)),e===a&&(r.substr(Jo,12).toLowerCase()===q?(e=r.substr(Jo,12),Jo+=12):(e=a,0===_o&&Zo(Wt))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=_n()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,5).toLowerCase()===M?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(_t)),e===a&&(r.substr(Jo,6).toLowerCase()===N?(e=r.substr(Jo,6),Jo+=6):(e=a,0===_o&&Zo(Ht))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Kn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,5).toLowerCase()===V?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(Gt)),e===a&&(r.substr(Jo,6).toLowerCase()===F?(e=r.substr(Jo,6),Jo+=6):(e=a,0===_o&&Zo(Ut)),e===a&&(r.substr(Jo,10).toLowerCase()===Q?(e=r.substr(Jo,10),Jo+=10):(e=a,0===_o&&Zo(Kt)))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Un()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,13).toLowerCase()===j?(e=r.substr(Jo,13),Jo+=13):(e=a,0===_o&&Zo(Jt)),e===a&&(r.substr(Jo,5).toLowerCase()===S?(e=r.substr(Jo,5),Jo+=5):(e=a,0===_o&&Zo(Tt))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Gn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,7).toLowerCase()===B?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(Xt)),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=Hn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,12).toLowerCase()===D?(e=r.substr(Jo,12),Jo+=12):(e=a,0===_o&&Zo(Yt)),e===a&&(r.substr(Jo,15).toLowerCase()===J?(e=r.substr(Jo,15),Jo+=15):(e=a,0===_o&&Zo(Zt)),e===a&&(r.substr(Jo,14).toLowerCase()===T?(e=r.substr(Jo,14),Jo+=14):(e=a,0===_o&&Zo($t)))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=zn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e;return t=Jo,hs(),124===r.charCodeAt(Jo)?(e=K,Jo++):(e=a,0===_o&&Zo(ne)),e!==a?(hs(),To=t,t=Xn()):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n;return t=Jo,hs(),r.substr(Jo,6).toLowerCase()===X?(e=r.substr(Jo,6),Jo+=6):(e=a,0===_o&&Zo(fe)),e===a&&(r.substr(Jo,6).toLowerCase()===Y?(e=r.substr(Jo,6),Jo+=6):(e=a,0===_o&&Zo(le)),e===a&&(r.substr(Jo,8).toLowerCase()===Z?(e=r.substr(Jo,8),Jo+=8):(e=a,0===_o&&Zo(he)),e===a&&(r.substr(Jo,6).toLowerCase()===$?(e=r.substr(Jo,6),Jo+=6):(e=a,0===_o&&Zo(be)),e===a&&(r.substr(Jo,10).toLowerCase()===rr?(e=r.substr(Jo,10),Jo+=10):(e=a,0===_o&&Zo(ve)),e===a&&(r.substr(Jo,7).toLowerCase()===tr?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(de)),e===a&&(r.substr(Jo,7).toLowerCase()===er?(e=r.substr(Jo,7),Jo+=7):(e=a,0===_o&&Zo(pe)))))))),e!==a?(ot.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(yt)),n===a&&(n=null),hs(),To=t,t=ro(e)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s;return t=Jo,hs(),r.substr(Jo,3).toLowerCase()===H?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(se)),e!==a?(ct.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(ae)),n===a&&(n=null),o=function(){var t,e,n,o,s;if(t=Jo,it.test(r.charAt(Jo))?(e=r.charAt(Jo),Jo++):(e=a,0===_o&&Zo(ue)),e!==a){for(n=[],o=ns();o!==a;)n.push(o),o=ns();for(o=[],s=os();s!==a;)o.push(s),s=os();r.substr(Jo,5).toLowerCase()===z?(s=r.substr(Jo,5),Jo+=5):(s=a,0===_o&&Zo(ce)),s===a&&(109===r.charCodeAt(Jo)?(s=W,Jo++):(s=a,0===_o&&Zo(ie))),s===a&&(s=null),To=t,t=$n(e,n,o,s)}else Jo=t,t=a;return t}(),o!==a?(ot.test(r.charAt(Jo))?(s=r.charAt(Jo),Jo++):(s=a,0===_o&&Zo(yt)),s===a&&(s=null),hs(),To=t,t=Zn(o)):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c,i,l,h;return t=Jo,hs(),(e=es())!==a&&(n=ss())!==a?(o=fs(),s=ls(),47===r.charCodeAt(Jo)?(u=f,Jo++):(u=a,0===_o&&Zo(gt)),u!==a?((c=es())===a&&(c=null),(i=ss())===a&&(i=null),l=fs(),h=ls(),vs()!==a?(To=t,t=Sn(e,n,o,s,c,i,l,h)):(Jo=t,t=a)):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var t,e,n,o,s,u,c,i,f,b;return t=Jo,hs(),(e=es())!==a&&(n=ss())!==a?(o=fs(),s=ls(),r.substr(Jo,2)===l?(u=l,Jo+=2):(u=a,0===_o&&Zo(mt)),u===a&&(r.substr(Jo,4)===h?(u=h,Jo+=4):(u=a,0===_o&&Zo(wt))),u!==a?((c=es())===a&&(c=null),(i=ss())===a&&(i=null),f=fs(),b=ls(),vs()!==a?(To=t,t=Vn(e,n,o,s,c,i,f,b)):(Jo=t,t=a)):(Jo=t,t=a)):(Jo=t,t=a),t}())===a&&(t=function(){var r,t,e,n,o;return r=Jo,hs(),(t=es())!==a&&(e=ss())!==a?(n=fs(),o=ls(),vs()!==a?(To=r,r=jn(t,e,n,o)):(Jo=r,r=a)):(Jo=r,r=a),r}()),t}function ts(){var t,e,n;return t=Jo,42===r.charCodeAt(Jo)?(e=k,Jo++):(e=a,0===_o&&Zo(Ft)),e!==a?(at.test(r.charAt(Jo))?(n=r.charAt(Jo),Jo++):(n=a,0===_o&&Zo(Qt)),n!==a?(To=t,t=Pn()):(Jo=t,t=a)):(Jo=t,t=a),t}function es(){var t;return(t=function(){var t,e,n,o,s;if(t=Jo,it.test(r.charAt(Jo))?(e=r.charAt(Jo),Jo++):(e=a,0===_o&&Zo(ue)),e!==a){for(n=[],o=ns();o!==a;)n.push(o),o=ns();for(o=[],s=os();s!==a;)o.push(s),s=os();To=t,t=uo(e,n,o)}else Jo=t,t=a;return t}())===a&&(t=function(){var t,e,n,o;for(t=Jo,e=[],n=ns();n!==a;)e.push(n),n=ns();for(n=[],o=os();o!==a;)n.push(o),o=os();return r.substr(Jo,3)===ar?(o=ar,Jo+=3):(o=a,0===_o&&Zo(Ce)),o===a&&(r.substr(Jo,3)===ur?(o=ur,Jo+=3):(o=a,0===_o&&Zo(ye)),o===a&&(r.substr(Jo,2)===cr?(o=cr,Jo+=2):(o=a,0===_o&&Zo(ke)),o===a&&(r.substr(Jo,2)===ir?(o=ir,Jo+=2):(o=a,0===_o&&Zo(Le)),o===a&&(r.substr(Jo,2)===fr?(o=fr,Jo+=2):(o=a,0===_o&&Zo(Oe)),o===a&&(86===r.charCodeAt(Jo)?(o=lr,Jo++):(o=a,0===_o&&Zo(Ie)),o===a&&(73===r.charCodeAt(Jo)?(o=hr,Jo++):(o=a,0===_o&&Zo(Re)),o===a&&(lt.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(xe))))))))),o!==a?(To=t,t=co(e,n,o)):(Jo=t,t=a),t}()),t}function ns(){var t,e;return t=Jo,ht.test(r.charAt(Jo))?(e=r.charAt(Jo),Jo++):(e=a,0===_o&&Zo(Ee)),e!==a&&(To=t,e=io()),e}function os(){var t,e;return t=Jo,bt.test(r.charAt(Jo))?(e=r.charAt(Jo),Jo++):(e=a,0===_o&&Zo(je)),e!==a&&(To=t,e=fo()),e}function ss(){var t,e,n,o,s;if(t=Jo,e=Jo,n=function(){var t,e,n,o;if(t=Jo,r.substr(Jo,2)===Nr?(e=Nr,Jo+=2):(e=a,0===_o&&Zo(rn)),e!==a){if(n=[],vt.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(tn)),o!==a)for(;o!==a;)n.push(o),vt.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(tn));else n=a;n!==a?(To=t,t=So(n)):(Jo=t,t=a)}else Jo=t,t=a;return t}(),n===a&&(n=function(){var t,e,n,o,s;return t=Jo,r.substr(Jo,3).toLowerCase()===br?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(Se)),e===a&&(77===r.charCodeAt(Jo)?(e=vr,Jo++):(e=a,0===_o&&Zo(Ve)),e===a&&(9651===r.charCodeAt(Jo)?(e=Ar,Jo++):(e=a,0===_o&&Zo(Me)))),e!==a?(40===r.charCodeAt(Jo)?(n=gr,Jo++):(n=a,0===_o&&Zo(Ne)),n===a&&(n=null),57===r.charCodeAt(Jo)?(o=mr,Jo++):(o=a,0===_o&&Zo(Pe)),o!==a?(41===r.charCodeAt(Jo)?(s=wr,Jo++):(s=a,0===_o&&Zo(qe)),s===a&&(s=null),To=t,t=po()):(Jo=t,t=a)):(Jo=t,t=a),t}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,4).toLowerCase()===kr?(e=r.substr(Jo,4),Jo+=4):(e=a,0===_o&&Zo(Je)),e===a&&(r.substr(Jo,2)===Lr?(e=Lr,Jo+=2):(e=a,0===_o&&Zo(Te)),e===a&&(r.substr(Jo,2)===Or?(e=Or,Jo+=2):(e=a,0===_o&&Zo(Ge)))),e!==a&&(To=t,e=mo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,4).toLowerCase()===dr?(e=r.substr(Jo,4),Jo+=4):(e=a,0===_o&&Zo(Fe)),e===a&&(r.substr(Jo,2)===pr?(e=pr,Jo+=2):(e=a,0===_o&&Zo(Qe)),e===a&&(9651===r.charCodeAt(Jo)?(e=Ar,Jo++):(e=a,0===_o&&Zo(Me)))),e!==a&&(To=t,e=vo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,3).toLowerCase()===br?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(Se)),e!==a&&(To=t,e=ho()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,3).toLowerCase()===Cr?(e=r.substr(Jo,3),Jo+=3):(e=a,0===_o&&Zo(Be)),e!==a&&(To=t,e=Ao()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,5)===Fr?(e=Fr,Jo+=5):(e=a,0===_o&&Zo(Ye)),e!==a&&(To=t,e=xo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,5)===Vr?(e=Vr,Jo+=5):(e=a,0===_o&&Zo(Xe)),e!==a&&(To=t,e=Ro()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,4)===Sr?(e=Sr,Jo+=4):(e=a,0===_o&&Zo(We)),e!==a&&(To=t,e=Io()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,4)===jr?(e=jr,Jo+=4):(e=a,0===_o&&Zo(ze)),e!==a&&(To=t,e=Oo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,3)===Qr?(e=Qr,Jo+=3):(e=a,0===_o&&Zo(Ze)),e!==a&&(To=t,e=Eo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,3)===Mr?(e=Mr,Jo+=3):(e=a,0===_o&&Zo($e)),e!==a&&(To=t,e=jo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,2)===Er?(e=Er,Jo+=2):(e=a,0===_o&&Zo(He)),e!==a&&(To=t,e=Lo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,r.substr(Jo,2)===xr?(e=xr,Jo+=2):(e=a,0===_o&&Zo(_e)),e!==a&&(To=t,e=ko()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,57===r.charCodeAt(Jo)?(e=mr,Jo++):(e=a,0===_o&&Zo(Pe)),e!==a&&(To=t,e=yo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,55===r.charCodeAt(Jo)?(e=Rr,Jo++):(e=a,0===_o&&Zo(Ke)),e!==a&&(To=t,e=Co()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,54===r.charCodeAt(Jo)?(e=Ir,Jo++):(e=a,0===_o&&Zo(Ue)),e!==a&&(To=t,e=wo()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,109===r.charCodeAt(Jo)?(e=W,Jo++):(e=a,0===_o&&Zo(ie)),e===a&&(45===r.charCodeAt(Jo)?(e=yr,Jo++):(e=a,0===_o&&Zo(De))),e!==a&&(To=t,e=go()),t=e}(),n===a&&(n=function(){var t,e;return t=Jo,77===r.charCodeAt(Jo)?(e=vr,Jo++):(e=a,0===_o&&Zo(Ve)),e===a&&(e=""),e!==a&&(To=t,e=bo()),t=e}())))))))))))))))))),n!==a){for(o=[],(s=cs())===a&&(s=is())===a&&(s=as())===a&&(s=us());s!==a;)o.push(s),(s=cs())===a&&(s=is())===a&&(s=as())===a&&(s=us());e=n=[n,o]}else Jo=e,e=a;return e!==a&&(To=t,e=lo(e)),e}function as(){var t,e;return t=Jo,r.substr(Jo,4)===Pr?(e=Pr,Jo+=4):(e=a,0===_o&&Zo(en)),e===a&&(r.substr(Jo,4)===qr?(e=qr,Jo+=4):(e=a,0===_o&&Zo(nn))),e!==a&&(To=t,e=Vo()),e}function us(){var t,e;return t=Jo,r.substr(Jo,4)===Br?(e=Br,Jo+=4):(e=a,0===_o&&Zo(on)),e===a&&(r.substr(Jo,4)===Dr?(e=Dr,Jo+=4):(e=a,0===_o&&Zo(sn))),e!==a&&(To=t,e=Fo()),e}function cs(){var t,e,n,o,s;return t=Jo,40===r.charCodeAt(Jo)?(e=gr,Jo++):(e=a,0===_o&&Zo(Ne)),e===a&&(e=null),r.substr(Jo,4)===Jr?(n=Jr,Jo+=4):(n=a,0===_o&&Zo(an)),n===a&&(111===r.charCodeAt(Jo)?(n=Tr,Jo++):(n=a,0===_o&&Zo(un))),n!==a?(dt.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(cn)),o!==a?(41===r.charCodeAt(Jo)?(s=wr,Jo++):(s=a,0===_o&&Zo(qe)),s===a&&(s=null),To=t,t=Qo(o)):(Jo=t,t=a)):(Jo=t,t=a),t}function is(){var t,e,n,o,s;if(t=Jo,40===r.charCodeAt(Jo)?(e=gr,Jo++):(e=a,0===_o&&Zo(Ne)),e===a&&(e=null),r.substr(Jo,3)===Gr?(n=Gr,Jo+=3):(n=a,0===_o&&Zo(fn)),n!==a){if(o=[],ut.test(r.charAt(Jo))?(s=r.charAt(Jo),Jo++):(s=a,0===_o&&Zo(ee)),s!==a)for(;s!==a;)o.push(s),ut.test(r.charAt(Jo))?(s=r.charAt(Jo),Jo++):(s=a,0===_o&&Zo(ee));else o=a;o!==a?(41===r.charCodeAt(Jo)?(s=wr,Jo++):(s=a,0===_o&&Zo(qe)),s===a&&(s=null),To=t,t=Mo(o)):(Jo=t,t=a)}else Jo=t,t=a;return t}function fs(){var t,e,n,o;return t=Jo,e=Jo,94===r.charCodeAt(Jo)?(n=Ur,Jo++):(n=a,0===_o&&Zo(ln)),n!==a?(pt.test(r.charAt(Jo))?(o=r.charAt(Jo),Jo++):(o=a,0===_o&&Zo(hn)),o!==a?e=n=[n,o]:(Jo=e,e=a)):(Jo=e,e=a),e===a&&(e=null),To=t,No()}function ls(){var t,e,n,o;for(t=Jo,e=[],39===r.charCodeAt(Jo)?(n=Kr,Jo++):(n=a,0===_o&&Zo(bn));n!==a;)e.push(n),39===r.charCodeAt(Jo)?(n=Kr,Jo++):(n=a,0===_o&&Zo(bn));for(n=[],44===r.charCodeAt(Jo)?(o=_r,Jo++):(o=a,0===_o&&Zo(vn));o!==a;)n.push(o),44===r.charCodeAt(Jo)?(o=_r,Jo++):(o=a,0===_o&&Zo(vn));return To=t,Po(e,n)}function hs(){var r,t;for(_o++,r=[],t=bs();t!==a;)r.push(t),t=bs();return _o--,t=a,0===_o&&Zo(dn),r}function bs(){var t;return At.test(r.charAt(Jo))?(t=r.charAt(Jo),Jo++):(t=a,0===_o&&Zo(pn)),t}function vs(){var t,e;return t=function(){var t,e,n;return r.substr(Jo,3)===Hr?(t=Hr,Jo+=3):(t=a,0===_o&&Zo(An)),t===a&&(t=Jo,e=hs(),8594===r.charCodeAt(Jo)?(n=zr,Jo++):(n=a,0===_o&&Zo(gn)),n!==a?t=e=[e,n,hs()]:(Jo=t,t=a)),t}(),t===a&&(t=bs())===a&&(t=Jo,_o++,r.length>Jo?(e=r.charAt(Jo),Jo++):(e=a,0===_o&&Zo(mn)),_o--,e===a?t=void 0:(Jo=t,t=a)),t}let ds=0,ps="ionian";if((s=i())!==a&&Jo===r.length)return s;throw s!==a&&Jo<r.length&&Zo({type:"end"}),As=Ko,gs=Uo<r.length?r.charAt(Uo):null,ms=Uo<r.length?Yo(Uo,Uo+1):Yo(Uo,Uo),new n(n.buildMessage(As,gs),As,gs,ms);var As,gs,ms}}}},t={};function e(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return r[n](s,s.exports,e),s.exports}e.d=(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),e.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n={};return(()=>{e.r(n),e.d(n,{chord2mml:()=>w});var r=e(699);function t(r,t,e){for(var n=t.length*e,o=0,s=t;o<s.length;o++)r[s[o]].noteLength=n;return r}var o=function(r,t,e){if(e||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};function s(r){return delete r.event,delete r.root,delete r.quality,delete r.inversion,delete r.octaveOffset,delete r.upperRoot,delete r.upperQuality,delete r.upperInversion,delete r.upperOctaveOffset,delete r.lowerRoot,delete r.lowerQuality,delete r.lowerInversion,delete r.lowerOctaveOffset,r}function a(r,t,e,n,o){var s=h(r,t);return d(s=v(s,e,n),12*o)}function u(r,t,e,n,o,s,a){var u=[e],f=h(r,t),l=c(f=i(f=v(f,n,o),u),s,u,a);return d(l,-12)}function c(r,t,e,n){if(e=d(e,12*n),(r=d(r,12*t))[0]<=e[e.length-1])throw new Error("ERROR : lowerとupperが衝突しました lowerNotes:".concat(e," upperNotes:").concat(r));var s=[];return s.push.apply(s,o(o([],e,!1),r,!1)),s}function i(r,t){for(;r[0]<=t[t.length-1];)r=d(r,12);return r}function f(r,t,e,n,o){if("root"==n){var s=[r],a=h(r,t);return d(c(a=p(a,e),o,s,o),-12)}return p(d(h(r,t),12*o),e)}function l(r,t,e,n,o,s,a,u){var f=h(r,t),l=h(n,o),b=c(f=i(f=v(f,e,""),l=v(l,s,"")),a,l,u);return d(b,-12)}function h(r,t){var e=t.split(","),n=[];switch(e[0]){case"maj":n=[0,4,7];break;case"maj7":n=[0,4,7,11];break;case"min":n=[0,3,7];break;case"min7":n=[0,3,7,10];break;case"sus2":n=[0,2,7];break;case"sus4":n=[0,5,7];break;case"7sus2":n=[0,2,7,10];break;case"7sus4":n=[0,5,7,10];break;case"dim triad":n=[0,3,6];break;case"aug":n=[0,4,8];break;case"6":n=[0,4,7,9];break;case"7":n=[0,4,7,10];break;case"9":n=[0,4,7,10,14];break;case"11":n=[0,4,7,10,14,17];break;case"13":n=[0,4,7,10,14,17,21];break;default:if("4."==e[0].substring(0,2)){n=[0];for(var o=1;o<parseInt(e[0][2]);o++)n.push(5*o)}}for(var s=0,a=e;s<a.length;s++)switch(a[s]){case"omit1":n=n.filter((function(r){return 0!==r}));break;case"omit3":n=n.filter((function(r){return![3,4].includes(r)}));break;case"omit5":n=n.filter((function(r){return 7!==r}));break;case"add2":n=b(n,2);break;case"add9":n=b(n,14);break;case"add4":n=b(n,5);break;case"add11":n=b(n,17);break;case"add6":n=b(n,9);break;case"add13":n=b(n,21);break;case"flatted fifth":n=n.map((function(r){return 7===r?6:r}));break;case"augmented fifth":n=n.map((function(r){return 7===r?8:r}))}return d(n,r)}function b(r,t){return r.includes(t)||(r.push(t),r.sort((function(r,t){return r-t}))),r}function v(r,t,e){switch(t){case"1st inv":r=A(r,1);break;case"2nd inv":r=A(r,2);break;case"3rd inv":r=A(r,3)}switch(e){case"drop2":r=function(r){if(r.length<2)return r;var t=r[r.length-2]-12;return r.splice(r.length-2,1),r.unshift(t),r}(r);break;case"drop4":r=function(r){if(r.length<4)return r;var t=r[r.length-4]-12;return r.splice(r.length-4,1),r.unshift(t),r}(r);break;case"drop2and4":r=function(r){if(r.length<4)return r;var t=r[r.length-2]-12,e=r[r.length-4]-12;return r.splice(r.length-2,1),r.splice(r.length-4+1,1),r.unshift(t),r.unshift(e),r}(r)}return r}function d(r,t){for(var e=0;e<r.length;e++)r[e]+=t;return r}function p(r,t){for(var e=!1,n=0,o=r;n<o.length;n++){if(o[n],(r[0]%12+12)%12==(t%12+12)%12){e=!0;break}r.push(r.shift())}if(e)return g(r);throw new Error("ERROR : ".concat(JSON.stringify(r)," を転回しようとしましたが、chordに ").concat(JSON.stringify(t)," が含まれていません。chordに含まれるnoteを指定してください。"))}function A(r,t){for(var e=0;e<t;e++)r.push(r.shift());return g(r)}function g(r){for(var t=-128,e=0;e<r.length;e++){for(var n=-128;n<128&&!(r[e]>t);n+=12)r[e]+=12;t=r[e]}return r}function m(r,t,e){var n=function(r,t,e){for(var n=t.map((function(t){return t+r})).map((function(r){return r%12})).sort((function(r,t){return r-t})),o=0;o<e.length;o++)if(JSON.stringify(e[o])===JSON.stringify(n))return o;throw new Error("ERROR : isSharpByKeyAndScale searchIonians")}(r,t,e);switch(n){case 0:case 2:case 4:case 7:case 9:case 11:return!0;case 1:case 3:case 5:case 6:case 8:case 10:return!1;default:throw new Error("ERROR : isSharpByKeyAndScale")}}var w={parse:r.parse};w.parse=function(e){var n=(0,r.parse)(e);return function(r){for(var t=function(r){for(var t=[],e=function(e){var n=r.map((function(r){return(r+e)%12}));t.push(n)},n=0;n<12;n++)e(n);return t}([0,2,4,5,7,9,11]).map((function(r){return r.sort((function(r,t){return r-t}))})),e="v11",n={event:"key",root:"C",sharpLength:0,flatLength:0,offset:0},o={event:"scale",offsets:[0,2,4,5,7,9,11]},s=m(n.offset,o.offsets,t),a=0,u=r;a<u.length;a++){var c=u[a];switch(c.event){case"inline mml":e+=c.mml;continue;case"bar":e+="/*|*/";continue;case"key":s=m((n=c).offset,o.offsets,t);continue;case"scale":o=c,s=m(n.offset,o.offsets,t);continue}var i=c.notes;if(i){var f=0;i.length&&(e+="'");for(var l=i[0];l<0;)l+=12,e+=">",f--;for(var h=0;h<i.length;h++){for(var b=i[h],v=Math.floor(b/12);v>f;)e+="<",f++;if(s)switch((b%12+12)%12){case 0:e+="c";break;case 1:e+="c+";break;case 2:e+="d";break;case 3:e+="d+";break;case 4:e+="e";break;case 5:e+="f";break;case 6:e+="f+";break;case 7:e+="g";break;case 8:e+="g+";break;case 9:e+="a";break;case 10:e+="a+";break;case 11:e+="b"}else switch((b%12+12)%12){case 0:e+="c";break;case 1:e+="d-";break;case 2:e+="d";break;case 3:e+="e-";break;case 4:e+="e";break;case 5:e+="f";break;case 6:e+="g-";break;case 7:e+="g";break;case 8:e+="a-";break;case 9:e+="a";break;case 10:e+="b-";break;case 11:e+="b"}!h&&c.noteLength&&(e+=c.noteLength)}i.length&&(e+="'")}}return e}(function(r){for(var t,e,n,o,c=[],i="root inv",h="close",b="no bass",v=0,d=0,p=0,A=r;p<A.length;p++){var g=A[p];switch(g.event){case"chord":g.notes=a(g.root,g.quality,null!==(t=g.inversion)&&void 0!==t?t:i,h,v+g.octaveOffset),g=s(g),c.push(g);break;case"chord over bass note":g.notes=u(g.upperRoot,g.upperQuality,g.lowerRoot,null!==(e=g.upperInversion)&&void 0!==e?e:i,h,v+g.upperOctaveOffset,d+g.lowerOctaveOffset),g=s(g),c.push(g);break;case"inversion":g.notes=f(g.upperRoot,g.upperQuality,g.lowerRoot,b,v+g.upperOctaveOffset),g=s(g),c.push(g);break;case"polychord":g.notes=l(g.upperRoot,g.upperQuality,null!==(n=g.upperInversion)&&void 0!==n?n:i,g.lowerRoot,g.lowerQuality,null!==(o=g.lowerInversion)&&void 0!==o?o:i,v+g.upperOctaveOffset,d+g.lowerOctaveOffset),g=s(g),c.push(g);break;case"change inversion mode to root inv":i="root inv";break;case"change inversion mode to 1st inv":i="1st inv";break;case"change inversion mode to 2nd inv":i="2nd inv";break;case"change inversion mode to 3rd inv":i="3rd inv";break;case"change open harmony mode to close":h="close";break;case"change open harmony mode to drop2":h="drop2";break;case"change open harmony mode to drop4":h="drop4";break;case"change open harmony mode to drop2and4":h="drop2and4";break;case"change bass play mode to root":b="root";break;case"change bass play mode to no bass":b="no bass";break;case"octave up":v++,d++;break;case"octave up upper":v++;break;case"octave up lower":d++;break;case"octave down":v--,d--;break;case"octave down upper":v--;break;case"octave down lower":d--;break;default:c.push(g)}}return c}(n=function(r){for(var e="chord over bass note",n="no bass",o=0,s=r;o<s.length;o++){var a=s[o];switch(a.event){case"change slash chord mode to chord over bass note":e="chord over bass note";break;case"change slash chord mode to inversion":e="inversion";break;case"change slash chord mode to polychord":e="polychord";break;case"slash chord":a.event=e;break;case"change bass play mode to root":n="root";break;case"change bass play mode to no bass":n="no bass";break;case"chord":"root"==n&&(a.event="chord over bass note",a.upperRoot=a.root,a.upperQuality=a.quality,a.upperInversion=a.inversion,a.upperOctaveOffset=a.octaveOffset,a.lowerRoot=a.root,a.lowerQuality=a.quality,a.lowerInversion=a.inversion,a.lowerOctaveOffset=a.octaveOffset,delete a.root,delete a.quality,delete a.inversion,delete a.octaveOffset)}}return r=function(r){for(var e=0,n=1,o=[],s=0;s<r.length;s++){var a=r[s];switch(a.event){case"chord":case"chord over bass note":case"inversion":case"polychord":a.noteLength=1,o.push(s);break;case"bar":e++,r=t(r,o,n),o=[],n=1;break;case"bar slash":e++,r=t(r,o,n=2),o=[]}}return e&&(r=t(r,o,n)),r}(r),r}(n)))}})(),n})()));